<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      help/howtos/development/create_gui – Freetz
    </title>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="/search" />
        <link rel="help" href="../../../TracGuide.html" />
        <link rel="alternate" href="create_gui%3Fformat=txt" type="text/x-trac-wiki" title="Reiner Text" />
        <link rel="up" href="../development.html" title="Übergeordnete Wiki-Seite anzeigen" />
        <link rel="start" href="/wiki" />
        <link rel="stylesheet" href="../../../../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../../../../chrome/common/css/wiki.css" type="text/css" /><link rel="stylesheet" href="../../../../chrome/wikiextras/css/phrases.css" type="text/css" /><link rel="stylesheet" href="../../../../chrome/wikiextras/css/boxes.css" type="text/css" /><link rel="stylesheet" href="../../../../chrome/wikiextras/css/boxes-300.css" type="text/css" /><link rel="stylesheet" href="../../../../chrome/wikiextras/css/boxes-narrow-toc.css" type="text/css" /><link rel="stylesheet" href="../../../../wikicss.css" type="text/css" /><link rel="stylesheet" href="../../../../chrome/tags/css/tractags.css" type="text/css" /><link rel="stylesheet" href="../../../../chrome/wikinegotiator/css/langmenu-ctxnav.css" type="text/css" />
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="/favicon.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="/search/opensearch" title="Freetz durchsuchen" />
      <script type="text/javascript" charset="utf-8" src="../../../../chrome/common/js/jquery.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../../../chrome/common/js/babel.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../../../chrome/common/js/messages/de.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../../../chrome/common/js/trac.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../../../chrome/common/js/search.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../../../chrome/common/js/folding.js"></script>
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("#content").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $("#content").find(".wikianchor").each(function() {
          $(this).addAnchor(babel.format(_("Link to #%(id)s"), {id: $(this).attr('id')}));
        });
        $(".foldable").enableFolding(true, true);
      });
    </script>
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="/wiki"><img src="../../../../chrome/common/freetz_motd.png" alt="Freetz" /></a>
      </div>
      <form id="search" action="/search" method="get">
        <div>
          <label for="proj-search">Suche:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Suche" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="/login">Anmelden</a></li><li><a href="/prefs">Einstellungen</a></li><li><a href="../../../TracGuide.html">Hilfe/Anleitung</a></li><li><a href="/about">Über Trac</a></li><li><a href="/notification" title="Wiki Pages Change Notifications">My Notifications</a></li><li><a href="/register">Registrieren</a></li><li class="last"><a href="../../../Impressum.html">Impressum</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first active"><a href="/wiki">Wiki</a></li><li><a href="/timeline">Journal</a></li><li><a href="/roadmap">Projektplan</a></li><li><a href="/browser">Quellen durchsehen</a></li><li><a href="/report">Tickets anzeigen</a></li><li><a href="/search">Suche</a></li><li><a href="/tags">Tags</a></li><li><a href="/downloads">Downloads</a></li><li class="last"><a href="/screenshots">Bildschirmfotos</a></li>
    </ul>
  </div>
    <div id="langmenu"><ul><li class="first"><span title="Select a language of wiki content">Language:</span></li><li class=" active"><a class="" href="create_gui..html" title="displaying language (default)">German</a></li><li class=" last"><a class=" notexist" href="/wiki/help/howtos/development/create_gui.en" title="(not available)">English</a></li></ul></div><div id="main">
      <div id="pagepath" class="noprint">
  <a class="pathentry first" title="Zeige WikiStart an" href="/wiki">Wiki:</a><a class="pathentry" href="../../../help.html" title="Zeige help an">help</a><span class="pathentry sep">/</span><a class="pathentry" href="../../howtos.html" title="Zeige help/howtos an">howtos</a><span class="pathentry sep">/</span><a class="pathentry" href="../development.html" title="Zeige help/howtos/development an">development</a><span class="pathentry sep">/</span><a class="pathentry" href="create_gui.html" title="Zeige help/howtos/development/create_gui an">create_gui</a>
</div>
      <div id="ctxtnav" class="nav">
        <h2>Kontext-Navigation</h2>
        <ul>
          <li class="first"><a href="../development.html">Aufwärts</a></li><li><a href="../../../WikiStart.html">Startseite</a></li><li><a href="../../../TitleIndex.html">Inhaltsverzeichnis</a></li><li><a href="create_gui%3Faction=history.html">Änderungshistorie</a></li><li class="last"><a href="/notification/help/howtos/development/create_gui" title="Watch Page">Watch Page</a></li>
        </ul>
        <hr />
      </div>
    <div id="content" class="wiki">
      <div class="wikipage searchable">
        
          <div id="wikipage" class="trac-content"><p>
</p><div class="wiki-toc"><h4>Howtos: Entwicklung</h4><ol><li><a href="repack_fw.html#EntpackenundPackenvonFirmware-Images">Entpacken und Packen von Firmware-Images</a><ol><li><a href="repack_fw.html#ToolsundSyntax">Tools und Syntax</a></li><li><a href="repack_fw.html#Vorgehensweise">Vorgehensweise</a></li><li><a href="repack_fw.html#Verwendungvonfwmodimnofreetz-Modus">Verwendung von fwmod im "no freetz"-Modus</a></li></ol></li><li><a href="integrate_patches.html#PatchesinFreetzeinspielen">Patches in Freetz einspielen</a></li><li><a href="developer_information/package_development_start/example_3.html#Example3:NZBGet">Example 3: NZBGet</a><ol><li><a href="developer_information/package_development_start/example_3.html#Buildmanually">Build manually</a></li><li><a href="developer_information/package_development_start/example_3.html#AddpackagetoFreetz">Add package to Freetz</a></li><li><a href="developer_information/package_development_start/example_3.html#Createnewimagewithaddedpackage">Create new image with added package</a></li><li><a href="developer_information/package_development_start/example_3.html#Testing">Testing</a></li><li><a href="developer_information/package_development_start/example_3.html#PreparingNewPackageforPublicIntegrationtoFreetzTrunk">Preparing New Package for Public Integration to Freetz Trunk</a></li></ol></li><li><a href="developer_information/package_development_start/example_2.html#Example2:par2cmdline">Example 2: par2cmdline</a><ol><li><a href="developer_information/package_development_start/example_2.html#Buildmanually">Build manually</a></li><li><a href="developer_information/package_development_start/example_2.html#AddpackagetoFreetz">Add package to Freetz</a></li><li><a href="developer_information/package_development_start/example_2.html#Createnewimagewithaddedpackage">Create new image with added package</a></li><li><a href="developer_information/package_development_start/example_2.html#Testing">Testing</a></li><li><a href="developer_information/package_development_start/example_2.html#PreparingNewPackageforPublicIntegrationtoFreetzTrunk">Preparing New Package for Public Integration to Freetz Trunk</a></li></ol></li><li><a href="developer_information/package_development_start/example_1.html#Example1:Httptunnel">Example 1: Httptunnel</a><ol><li><a href="developer_information/package_development_start/example_1.html#Buildmanually">Build manually</a></li><li><a href="developer_information/package_development_start/example_1.html#AddpackagetoFreetz">Add package to Freetz</a></li><li><a href="developer_information/package_development_start/example_1.html#CallProceduresmakemenuconfigandmake">Call Procedures "make menuconfig" and "make"</a></li><li><a href="developer_information/package_development_start/example_1.html#Testing">Testing</a></li><li><a href="developer_information/package_development_start/example_1.html#PreparingNewPackageforPublicIntegrationtoFreetzTrunk">Preparing New Package for Public Integration to Freetz Trunk</a></li></ol></li><li><ol><li><a href="sign_image.html#SignierenvonFirmware">Signieren von Firmware</a></li><li><a href="sign_image.html#KonkreteAnwendunginFreetz">Konkrete Anwendung in Freetz</a></li></ol></li><li><a href="firmware_update_details.html#AblaufeinesFirmware-Updates">Ablauf eines Firmware-Updates</a></li><li><a href="compile_own_progs.html#EigeneProgrammekompilieren">Eigene Programme kompilieren</a></li><li><a href="bandwidth_svg.html#DynamischeBandbreitenanzeigeperSVG">Dynamische Bandbreitenanzeige per SVG</a><ol><li><a href="bandwidth_svg.html#AnleitungzurTest-Installation">Anleitung zur Test-Installation</a></li></ol></li><li><a href="make_room.html#PlatzsparenimDateisystemderFritzBox">Platz sparen im Dateisystem der FritzBox</a><ol><li><a href="make_room.html#VorwortundMotivation">Vorwort und Motivation</a></li><li><a href="make_room.html#Bestandsaufnahme:WosteckendiePlatzfresser">Bestandsaufnahme: Wo stecken die Platzfresser?</a></li><li><a href="make_room.html#WeitereSpartricks">Weitere Spartricks</a></li><li><a href="make_room.html#Schlußwort">Schlußwort</a></li></ol></li><li><a href="save_mtd_1.html#Flash-PartitionenimlaufendenBetriebsichern">Flash-Partitionen im laufenden Betrieb sichern</a><ol><li><a href="save_mtd_1.html#Motivation">Motivation</a></li><li><a href="save_mtd_1.html#Voraussetzungen">Voraussetzungen</a></li><li><a href="save_mtd_1.html#Lösungsweg">Lösungsweg</a></li><li><a href="save_mtd_1.html#WegesichschnelleinenÜberblickzuverschaffen">Wege, sich schnell einen Überblick zu verschaffen</a></li><li><a href="save_mtd_1.html#Zusammenfassung">Zusammenfassung</a></li></ol></li><li><a href="release_management.html#ReleaseManagement">Release Management</a><ol><li><a href="release_management.html#SubversionRepository">Subversion Repository</a></li><li><a href="release_management.html#Checklists">Checklists</a></li><li><a href="release_management.html#GIT">GIT</a></li><li><a href="release_management.html#Downloads">Downloads</a></li><li><a href="release_management.html#References">References</a></li></ol></li><li><a href="developer_information/package_development_start.html#Firststeps-Howtostartyourfirstfreetzpackage">First steps - How to start your first freetz package</a><ol><li><a href="developer_information/package_development_start.html#Info">Info</a></li><li><a href="developer_information/package_development_start.html#BuildEnvironment">Build Environment</a></li><li><a href="developer_information/package_development_start.html#FileStructure">File Structure</a></li><li><a href="developer_information/package_development_start.html#ExamplesBinaryPackage">Examples Binary Package</a></li><li><a href="developer_information/package_development_start.html#ConfigurationHandling">Configuration Handling</a></li><li><a href="developer_information/package_development_start.html#ExamplesWeb-Interface">Examples Web-Interface</a></li><li><a href="developer_information/package_development_start.html#Troubleshooting">Trouble shooting</a></li></ol></li><li><a href="make_kernel.html#Kernelkonfigurierenundkompilieren">Kernel konfigurieren und kompilieren</a></li><li><a href="menuconfig.html#Menükonfigurationpflegen">Menükonfiguration pflegen</a><ol><li><a href="menuconfig.html#Einstieg">Einstieg</a></li><li><a href="menuconfig.html#Beispiel-KonfigurationfüreinneuesPaket">Beispiel-Konfiguration für ein neues Paket</a></li><li><a href="menuconfig.html#Menuconfig-Warnungenbeheben">Menuconfig-Warnungen beheben</a></li><li><a href="menuconfig.html#ErklärungundAnwendungdererweitertenMK-Targets">Erklärung und Anwendung der erweiterten MK-Targets</a></li><li><a href="menuconfig.html#Syntax-FehlerinMK-Dateienfinden">Syntax-Fehler in MK-Dateien finden</a></li><li><a href="menuconfig.html#Syntax-HervorhebungfürMK-Dateien">Syntax-Hervorhebung für MK-Dateien</a></li></ol></li><li><a href="adam2.html#ADAM2-Bootloader">ADAM2-Bootloader</a><ol><li><a href="adam2.html#Bootloader-Backupanlegen">Bootloader-Backup anlegen</a></li><li><a href="adam2.html#Bootloaderüberschreiben">Bootloader überschreiben</a></li><li><a href="adam2.html#Bootloader-Befehle">Bootloader-Befehle</a></li><li><a href="adam2.html#Bootloader-Quelltext">Bootloader-Quelltext</a></li><li><a href="adam2.html#AufbaudesBootloaders">Aufbau des Bootloaders</a></li><li><a href="adam2.html#BootloaderundFreetz">Bootloader und Freetz</a></li></ol></li><li><a href="urlader_flags.html#EinstellungenspeichernimUrlader-Environment">Einstellungen speichern im Urlader-Environment</a><ol><li><a href="urlader_flags.html#VorwortundMotivation">Vorwort und Motivation</a></li><li><a href="urlader_flags.html#Lösungsmöglichkeiten">Lösungsmöglichkeiten</a></li><li><a href="urlader_flags.html#BootloaderEnvironment">Bootloader Environment</a></li><li><a href="urlader_flags.html#Variablekernel_args">Variable "kernel_args"</a></li><li><a href="urlader_flags.html#Kernel_Args-API">Kernel_Args-API</a></li><li><a href="urlader_flags.html#MöglicheAnwendungsfälle">Mögliche Anwendungsfälle</a></li></ol></li><li><a href="make_busybox.html#Busyboxkonfigurierenundkompilieren">Busybox konfigurieren und kompilieren</a></li><li><a href="package_creation.html#WiebaueicheineigenesPaketfürFreetz">Wie baue ich ein eigenes Paket für Freetz?</a></li><li><a href="analyse_image_names.html#Firmware-Image-Namenanalysierenundinterpretieren">Firmware-Image-Namen analysieren und interpretieren</a><ol><li><a href="analyse_image_names.html#Einleitung">Einleitung</a></li><li><a href="analyse_image_names.html#Skript-Code">Skript-Code</a></li><li><a href="analyse_image_names.html#DatenimRohformat">Daten im Rohformat</a></li><li><a href="analyse_image_names.html#AusgabegrundlegenderInformationen">Ausgabe grundlegender Informationen</a></li><li><a href="analyse_image_names.html#AusgabeerweiterterInformationen">Ausgabe erweiterter Informationen</a></li></ol></li><li><ol><li><a href="developer_information/package_development_start/webinterface_example_1.html#Web-interfaceHTTPTunnel">Web-interface HTTPTunnel</a></li></ol></li><li><a href="developer_information.html#DeveloperInformation">Developer Information</a></li><li><a href="install_addon.html#AddonPaketinstallieren">Addon Paket installieren</a></li><li><a href="developer_information/package_development_dynamic.html#PaketverwaltungfürFreetz">Paketverwaltung für Freetz</a><ol><li><a href="developer_information/package_development_dynamic.html#ErweiterungdesDateisystems">Erweiterung des Dateisystems</a></li><li><a href="developer_information/package_development_dynamic.html#Paketverwaltung">Paketverwaltung</a></li><li><a href="developer_information/package_development_dynamic.html#Links">Links</a></li><li><a href="developer_information/package_development_dynamic.html#Kommentare">Kommentare</a></li></ol></li><li><a href="manipulation_detection.html#WiedieFritzBoxManipulationenerkennt">Wie die FritzBox Manipulationen erkennt</a><ol><li><a href="manipulation_detection.html#Ursachen">Ursachen</a></li><li><a href="manipulation_detection.html#Diagnose">Diagnose</a></li><li><a href="manipulation_detection.html#Lösungen">Lösungen</a></li><li><a href="manipulation_detection.html#SchlußwortundAusblick">Schlußwort und Ausblick</a></li></ol></li><li><a href="developer_information/shell_coding_conventions.html#ShellCodingConventions">Shell Coding Conventions</a><ol><li><a href="developer_information/shell_coding_conventions.html#ShellLanguage">Shell Language</a></li><li><a href="developer_information/shell_coding_conventions.html#BasicFormat">Basic Format</a></li><li><a href="developer_information/shell_coding_conventions.html#IfForandWhile">If, For, and While</a></li><li><a href="developer_information/shell_coding_conventions.html#TestBuilt-in">Test Built-in</a></li><li><a href="developer_information/shell_coding_conventions.html#Single-lineconditionalstatements">Single-line conditional statements</a></li><li><a href="developer_information/shell_coding_conventions.html#InfiniteLoops">Infinite Loops</a></li><li><a href="developer_information/shell_coding_conventions.html#ExitStatusandIfWhileStatements">Exit Status and If/While Statements</a></li><li><a href="developer_information/shell_coding_conventions.html#VariableReferences">Variable References</a></li><li><a href="developer_information/shell_coding_conventions.html#VariableNaming">Variable Naming</a></li><li><a href="developer_information/shell_coding_conventions.html#Quoting">Quoting</a></li><li><a href="developer_information/shell_coding_conventions.html#VariableAssignments">Variable Assignments</a></li><li><a href="developer_information/shell_coding_conventions.html#TestingforNon-EmptyStrings">Testing for (Non-)Empty Strings</a></li><li><a href="developer_information/shell_coding_conventions.html#Commenting">Commenting</a></li><li><a href="developer_information/shell_coding_conventions.html#Pathnames">Pathnames</a></li><li><a href="developer_information/shell_coding_conventions.html#InterpreterMagic">Interpreter Magic</a></li></ol></li><li><a href="developer_information/package_development.html#PackageDevelopment">Package Development</a><ol><li><a href="developer_information/package_development.html#PersistentPackageSettings">Persistent Package Settings</a></li></ol></li><li class="active"><a href="create_gui.html#ErstelleneinerGUIfürPaketeinFreetz">Erstellen einer GUI für Pakete in Freetz</a><ol><li class="active"><a href="create_gui.html#Motivation">Motivation</a></li><li class="active"><a href="create_gui.html#Grundlagen">Grundlagen</a></li><li class="active"><a href="create_gui.html#WiefunktioniertdasmitderGUI">Wie funktioniert das mit der GUI?</a></li></ol></li><li><a href="flash.html#FlashPartitionierung">Flash Partitionierung</a><ol><li><a href="flash.html#HiddenSquashFS">Hidden SquashFS</a></li><li><a href="flash.html#ContiguousSquashFS">Contiguous SquashFS</a></li><li><a href="flash.html#HiddenRoot">Hidden Root</a></li><li><a href="flash.html#NANDRoot">NAND Root</a></li><li><a href="flash.html#Dateisystem">Dateisystem</a></li><li><a href="flash.html#Kernel">Kernel</a></li><li><a href="flash.html#Weblinks">Weblinks</a></li></ol></li><li><a href="developer_information/post_commit_hook.html#TracHooks">Trac Hooks</a><ol><li><a href="developer_information/post_commit_hook.html#trac-post-commit-hook">trac-post-commit-hook</a></li><li><a href="developer_information/post_commit_hook.html#trac-post-revprop-change-hook">trac-post-revprop-change-hook</a></li></ol></li><li><a href="developer_information/package_development_advanced.html#PackageDeveloping-AdvancedTopics">Package Developing - Advanced Topics</a><ol><li><a href="developer_information/package_development_advanced.html#Addingconditionalpatches">Adding conditional patches</a></li><li><a href="developer_information/package_development_advanced.html#Addingmulti-binarypackages">Adding multi-binary packages</a></li></ol></li><li><a href="integrate_own_files.html#EigeneDateienindieFirmwareintegrieren">Eigene Dateien in die Firmware integrieren</a><ol><li><a href="integrate_own_files.html#FesteIntegrationüberdasFreetzImage">Feste Integration über das Freetz Image</a></li><li><a href="integrate_own_files.html#ErzeugenderDateienausderdebug.cfg">Erzeugen der Dateien aus der debug.cfg</a></li><li><a href="integrate_own_files.html#NachladenvomWebserver">Nachladen vom Webserver</a></li><li><a href="integrate_own_files.html#NachladenvomUSB-Stick">Nachladen vom USB-Stick</a></li><li><a href="integrate_own_files.html#WebDAVSharemounten">WebDAV Share mounten</a></li><li><a href="integrate_own_files.html#NFS-Sharemounten">NFS-Share mounten</a></li></ol></li><li><a href="freetz_make.html#FreetzBuild-Prozeß">Freetz Build-Prozeß</a><ol><li><a href="freetz_make.html#VorwortundMotivation">Vorwort und Motivation</a></li><li><a href="freetz_make.html#Grundsätzliches">Grundsätzliches</a></li></ol></li><li><a href="save_mtd_2.html#Flash-PartitionenvonaußenmitFTPsichern">Flash-Partitionen von außen mit FTP sichern</a><ol><li><a href="save_mtd_2.html#Motivation">Motivation</a></li><li><a href="save_mtd_2.html#Voraussetzungen">Voraussetzungen</a></li><li><a href="save_mtd_2.html#AllgemeineInformationenzurDatensicherung">Allgemeine Informationen zur Datensicherung</a></li><li><a href="save_mtd_2.html#SicherungmitLinux-Standard-FTPftp">Sicherung mit Linux-Standard-FTP (ftp)</a></li><li><a href="save_mtd_2.html#SicherungmitLinux-NcFTPncftpget">Sicherung mit Linux-NcFTP (ncftpget)</a></li><li><a href="save_mtd_2.html#SicherungmitCygwin-NcFTPncftpget">Sicherung mit Cygwin-NcFTP (ncftpget)</a></li><li><a href="save_mtd_2.html#UploadsviaFTP">Uploads via FTP</a></li></ol></li><li><a href="developer_information/webif/libmodcgi.html#libmodcgi.sh">libmodcgi.sh</a><ol><li><a href="developer_information/webif/libmodcgi.html#cgi">cgi</a></li><li><a href="developer_information/webif/libmodcgi.html#cgi_begin">cgi_begin</a></li><li><a href="developer_information/webif/libmodcgi.html#cgi_end">cgi_end</a></li><li><a href="developer_information/webif/libmodcgi.html#sec_begin">sec_begin</a></li><li><a href="developer_information/webif/libmodcgi.html#sec_end">sec_end</a></li><li><a href="developer_information/webif/libmodcgi.html#html">html</a></li><li><a href="developer_information/webif/libmodcgi.html#checkselect">check, select</a></li><li><a href="developer_information/webif/libmodcgi.html#href">href</a></li><li><a href="developer_information/webif/libmodcgi.html#back_button">back_button</a></li><li><a href="developer_information/webif/libmodcgi.html#sec_level">sec_level</a></li><li><a href="developer_information/webif/libmodcgi.html#stat_bar">stat_bar</a></li><li><a href="developer_information/webif/libmodcgi.html#cgi_param">cgi_param</a></li><li><a href="developer_information/webif/libmodcgi.html#cgi_errorprint_error">cgi_error, print_error</a></li><li><a href="developer_information/webif/libmodcgi.html#path_info">path_info</a></li><li><a href="developer_information/webif/libmodcgi.html#valid">valid</a></li></ol></li><li><a href="create_cross-compiler_toolchain.html#Cross-CompilerToolchainerstellen">Cross-Compiler / Toolchain erstellen</a></li><li><a href="create_cross-compiler_toolchain.html#EigeneDownload-Toolchainerstellen">Eigene Download-Toolchain erstellen</a></li><li><a href="create_cross-compiler_toolchain.html#TargetNative-Compiler-Toolchainerstellen">Target/Native-Compiler-Toolchain erstellen</a><ol><li><a href="create_cross-compiler_toolchain.html#Usingthedev-toolspackagetoinstallcompilerandtools">Using the dev-tools package to install compiler and tools</a></li></ol></li></ol></div><p>
</p>
<h1 id="ErstelleneinerGUIfürPaketeinFreetz">Erstellen einer GUI für Pakete in Freetz</h1>
<h2 id="Motivation">Motivation</h2>
<p>
Ein großer Faktor für den Erfolg von Freetz ist die Tatsache, dass die Pakete dort über eine GUI zu konfigurieren sind. Über den Aufbau und die Vorgehensweise zur Erstellen einer solchen GUI soll es in diesem Beitrag gehen. Als Grundlage nehmen wir ein virtuelles Paket mit Namen "hugo" an, um einen Bezug zu haben 
</p>
<h2 id="Grundlagen">Grundlagen</h2>
<p>
Bevor man sich Gedanken über die GUI machen kann, sind ein paar grundlegende Dinge über die Art und Weise zu sagen, wie in Freetz Pakete funktionieren. Als grundlegende Information sei auf die <a class="ext-link" href="http://www.ip-phone-forum.de/showthread.php?t=90425"><span class="icon">​</span>Doku von Daniel</a> verwiesen, hier soll das ganze nur kurz wiedergegeben werden (ich hoffe das "fast wortwörtliche direkte Kopieren" aus dem Thread von Daniel ist mir hier erlaubt):
</p>
<h3 id="EigenePakete">Eigene Pakete</h3>
<p>
An ein Paket stellen sich folgende Anforderungen:
</p>
<ul><li>rc Skript: <tt>etc/init.d/rc.&lt;paketname&gt; [start|stop|load|unload|restart|status]</tt>
</li></ul><p>
Wenn konfigurierbar:
</p>
<ul><li>Default Konfiguration: <tt>etc/default.&lt;paketname&gt;/&lt;paketname&gt;.cfg</tt>
</li><li>Optional: cgi Skript für die Weboberfläche: <tt>usr/lib/cgi-bin/&lt;paketname&gt;.cgi</tt>
</li><li>Optional: Extra cgi Skripte in <tt>usr/lib/cgi-bin/&lt;paketname&gt;/</tt>
</li></ul><p>
Sonstige Default Dateien sollten auch ins Verzeichnis etc/default.&lt;paketname&gt;/ gepackt werden.
</p>
<ul><li><tt>/mod/etc/init.d/rc.&lt;paketname&gt;</tt>
</li><li><tt>/mod/etc/default.&lt;paketname&gt;/*</tt>
</li><li><tt>/mod/usr/lib/cgi-bin/&lt;paketname&gt;.cgi</tt>
</li><li><tt>/mod/usr/lib/cgi-bin/&lt;paketname&gt;/*</tt>
</li></ul><p>
sind immer gültig (sofern im Paket enthalten) und werden bei statischen Paketen über Symlinks realisiert. Binaries sollten nach <tt>bin</tt>, <tt>sbin</tt>, <tt>usr/bin</tt> oder <tt>usr/sbin</tt>, damit sie sowohl in statischen als auch dynamischen Paketen aufrufbar sind (die PATH Variable enthält auch <tt>/mod/bin</tt>, <tt>/mod/sbin</tt>, <tt>/mod/usr/bin</tt> und <tt>/mod/usr/sbin</tt>). Libraries funktionieren mit statischen wie auch dynamischen Paketen in lib (<tt>LD_LIBRARY_PATH=/mod/lib</tt> &rArr; Library wird in <tt>/lib</tt> und <tt>/mod/lib</tt> gesucht)
</p>
<p>
Benötigt ein Daemon eines Paketes eine Konfigurationsdatei (z.B. <tt>hugo.conf</tt>), die für diesen Daemon spezifisch ist, so wird sie in der Regel im rc Skript vor dem Starten des Daemons erzeugt. Ich habe dafür folgende Konvention gewählt (ist aber kein muss), welche am Beispiel der <tt>bftpd.conf</tt> erläutert ist:
</p>
<ol><li>Suche nach Skript <tt>/tmp/flash/hugo_conf</tt>, welches die <tt>hugo.conf</tt> als Ausgabe hat; existiert? &rarr; goto 3.
</li><li>Führe Skript <tt>/etc/default.hugo/hugo_conf</tt> aus, die Ausgabe ergibt wie bei 1. die <tt>hugo.conf</tt> (meistens ist dies der Fall)
</li><li>Existiert <tt>/tmp/flash/hugo.conf.extra</tt>? &rarr; füge sie an die in 1. oder 2. generierte <tt>hugo.conf</tt> an
</li></ol><p>
Das sollte alle Möglichkeiten des "Feintunings" offen lassen. 3. macht nicht immer Sinn, darum ist es optional. Wäre schön, wenn jeder, der ein Paket erstellt, die Konventionen einhält. Das Skript <tt>hugo_conf</tt> muss stets mit exportierten Variablen aus <tt>/mod/etc/conf/hugo.cfg</tt> aufgerufen werden. So wird die <tt>hugo.conf</tt> je nach Paket-Konfiguration individuell erstellt.
</p>
<h3 id="Konfiguration">Konfiguration</h3>
<p>
Jedes Paket besitzt ein Konfigurationsdatei <tt>/mod/etc/conf/&lt;paketname&gt;.cfg</tt>, welche wie folgt aufgebaut ist:
</p>
<pre class="wiki">  export &lt;PAKETNAME&gt;_OPTION1='bla'
  export &lt;PAKETNAME&gt;_OPTION2='blub'
  ...
</pre><p>
Sie enthält alle Optionen, die auch übers Webinterface eingestellt werden können und ist in Shell Syntax. Damit kann die aktuelle Konfiguration mit
</p>
<pre class="wiki">  . /mod/etc/conf/&lt;paketname&gt;.cfg
</pre><p>
eingelesen werden. In der Datei <tt>/mod/etc/default.&lt;paketname&gt;/&lt;paketname&gt;.cfg</tt> sind die default Einstellungen gespeichert. Beim Speichern werden nur die sich von den Defaults unterscheidenden Variablen in die <tt>/tmp/flash/&lt;paketname&gt;.diff</tt> transferiert und mit dem ganzen Verzeichnis <tt>/tmp/flash/</tt> ins tffs abgelegt. Die Basis-Konfiguration hat den Paketnamen 'mod'. Die Befehle dazu sind:
</p>
<div class="code"><pre>  modconf load &lt;paketname&gt;
  <span class="c"># -&gt; erzeugt die Datei /mod/etc/conf/&lt;paketname&gt;.cfg aus den Defaults und der &lt;paketname&gt;.diff
</span>
  
  modconf save &lt;paketname&gt;
  <span class="c"># -&gt; erzeugt die Datei &lt;paketname&gt;.diff aus den Defaults und der /mod/etc/conf/&lt;paketname&gt;.cfg
</span>  
  modsave
  <span class="c"># -&gt; ruft unter anderem für alle Pakete 'modconf save' auf und speichert das Verzeichnis /tmp/flash ins tffs
</span>  
  modsave flash
  <span class="c"># -&gt; speichert nur das Verzeichnis /tmp/flash ins tffs
</span></pre></div><p>
Das dauerhafte Abschalten des Webinterfaces geht damit so (Variable MOD_HTTPD in der Basis-Konfiguration 'mod'):
</p>
<pre class="wiki">  vi /mod/etc/conf/mod.cfg  # -&gt; MOD_HTTPD='yes' durch MOD_HTTPD='no' ersetzen
  modconf save mod  # nun ist mod.diff up-to-date
  modsave flash  # damit ist mod.diff im tffs
  
  # oder
  
  vi /mod/etc/conf/mod.cfg  # -&gt; MOD_HTTPD='yes' durch MOD_HTTPD='no' ersetzen
  modsave  # erzeugt alle diff Dateien neu und speichert ins tffs
</pre><p>
Soviel zur Veranschaulichung. Komfortabler ist folgendes:
</p>
<pre class="wiki">  modconf set mod MOD_HTTPD=no
  modconf save mod
  modsave flash
  
  # bzw.
  
  modconf set mod MOD_HTTPD=no
  modsave
</pre><h2 id="WiefunktioniertdasmitderGUI">Wie funktioniert das mit der GUI?</h2>
<p>
Im vorigen Abschnitt wurde beschrieben, welche Dateien es gibt und wie ich die Werte von Variablen direkt von der Shell aus ändern kann.  
Die Freetz GUI's basieren auf dem Konzept des <a class="ext-link" href="http://www.fpx.de/fp/Software/ProcCGI.html"><span class="icon">​</span>Proccgi</a> von Frank Pilhofer. Hierzu bedienen sie sich Umgebungsvariablen, die wie oben beschrieben dem Muster <tt>&lt;Paketname&gt;_&lt;Variablenname&gt;</tt> folgen. In den HTML-Seiten der GUI werden Input-Felder mit dem Tag <tt>name="&lt;Variablenname&gt;"</tt> versehen. Diese Felder korrespondieren dann mit den Variablen. Alle GUI-Seiten sind in einen Rahmen-Formular von Freetz untergebracht, das über den Button "Übernehmen" diese Variablen ausliest und der Umgebungsvariable zuweist. 
</p>
<h3 id="EinBeispiel">Ein Beispiel</h3>
<p>
Ich hoffe, ein kleines Beispiel macht das deutlicher, unser "Paket" heisst wie schon gesagt "hugo". 
Als erstes legen wir das "default" Verzeichnis und die hugo.cfg Datei an.
</p>
<div class="code"><pre>mkdir /mod/etc/default.hugo
touch /mod/etc/default.hugo/hugo.cfg
</pre></div><p>
Im "default" Verzeichnis des Paketes <tt>/etc/default.hugo/hugo.cfg</tt> werden die benutzten Variablen über einen export definiert und zugleich auch mit einem "default-Wert" belegt. Wenn man später also im Webinterface auf "Standard" klickt, werden die dort festgelegten Werte aus der GUI übernommen. So eine Datei sähe dann in etwa so aus:
</p>
<div class="code"><pre><span class="nb">export </span><span class="nv">HUGO_ACTION</span><span class="o">=</span><span class="s1">'ACCEPT'</span>
<span class="nb">export </span><span class="nv">HUGO_CHAIN</span><span class="o">=</span><span class="s1">'INPUT'</span>
<span class="nb">export </span><span class="nv">HUGO_DESTINATION</span><span class="o">=</span><span class="s1">'anywhere'</span>
<span class="nb">export </span><span class="nv">HUGO_ENABLED</span><span class="o">=</span><span class="s1">'no'</span>
</pre></div><p>
Damit sind die Variablen <tt>ACTION</tt>, <tt>CHAIN</tt>, <tt>DESTINATION</tt>, <tt>ENABLED</tt>, etc. definiert. Diese Variablennamen werden in der GUI, einem "cgi-File" belegt (per Eingabe oder auch per javascript). 
</p>
<p>
Der entsprechende Abschnitt dazu im Code 
</p>
<div class="code"><pre><span class="nt">&lt;p&gt;</span>DESTINATION: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"destination"</span> <span class="na">value=</span><span class="s">"$(html "</span><span class="err">$HUGO_DESTINATION")"</span><span class="nt">&gt;&lt;/p&gt;</span>
</pre></div><p>
man sieht hier auch, dass dieses "cgi"-File Shellauswertung nutzt, um im HTML-Code den Wert von "DESTINATION" als Vorbelegung nutzt.
</p>
<p>
Beim "Übernehmen" werden diese Variablen mit den "default-Variablen" verglichen und beim Abweichen direkt resetfest im Flash abgespeichert.
</p>
<p>
Gibt man hier nun in das Feld "Blabla" ein, erzeugt das "Übernehmen" die Datei <tt>/var/tmp/flash/hugo.diff</tt> mit diesem Inhalt:
</p>
<div class="code"><pre><span class="nb">export </span><span class="nv">HUGO_DESTINATION</span><span class="o">=</span><span class="s1">'Blabla'</span>
</pre></div><p>
die mit <tt>modsave</tt> auch gleich gesichert wird. Auch wird aus der Zusammenführung der default-Werte und der geänderten Werte im <em>diff</em>-file die aktuelle Datei <tt>/mod/etc/conf/hugo.cfg</tt>  erstellt, die für jede Variable den aktuellen Wert zuweist (das alles macht übrigens das cgi <tt>/usr/mww/cgi-bin/save.cgi</tt>, der beim Abschicken des Formulars aufgerufen wird).
</p>
<p>
hat man also die <tt>hugo.cfg</tt> Datei im "default" Verzeichnis fertig gestellt, so kopiert man diese nach <tt>/mod/etc/conf</tt>
</p>
<div class="code"><pre>modconf load hugo
</pre></div><p>
Jetzt kommt die GUI Programmierung dran. Die Datei <tt>hugo.cgi</tt> wird im Verzeichnis <tt>/mod/usr/lib/cgi-bin/</tt> angelegt und sollte ungefähr so aussehen.
</p>
<div class="code"><pre><span class="c">#!/bin/sh
</span>
<span class="nv">PATH</span><span class="o">=</span>/bin:/usr/bin:/sbin:/usr/sbin
. /usr/lib/libmodcgi.sh

<span class="c"># setzt auto_chk oder man_chk auf ' checked', je nach Wert von HUGO_ENABLED
</span>check <span class="s2">"$HUGO_ENABLED"</span> yes:auto <span class="s2">"*"</span>:man


sec_begin <span class="s1">'Activation'</span>
cat <span class="s">&lt;&lt; EOF
&lt;div style="float: right;"&gt;&lt;font size="1"&gt;Version 1.0.3&lt;/font&gt;&lt;/div&gt;
&lt;p&gt;
&lt;input id="e1" type="radio" name="enabled" value="yes" $auto_chk&gt;&lt;label for="e1"&gt; Active&lt;/label&gt;
&lt;input id="e2" type="radio" name="enabled" value="no" $man_chk&gt;&lt;label for="e2"&gt; Inactive&lt;/label&gt;
&lt;/p&gt;
EOF</span>
sec_end


sec_begin <span class="s1">'hugo Überschrift'</span>
cat <span class="s">&lt;&lt; EOF
...
&lt;p&gt;DESTINATION: &lt;input type="text" name="destination" value="$(html "$HUGO_DESTINATION")"&gt;&lt;/p&gt;
...
EOF</span>
sec_end
</pre></div><p>
Wollen wir eine zusätzliche Datei fest ins Flash speichern, so müssen wir diese mit <tt>modreg file</tt> registrieren und eine Datei namens <tt>hugo_file.def</tt> im Verzeichnis <tt>/mod/etc/default.hugo</tt> anlegen. Inhalt muss so aussehen:
</p>
<div class="code"><pre><span class="nv">CAPTION</span><span class="o">=</span><span class="s1">'Überschrift'</span>
<span class="nv">DESCRIPTION</span><span class="o">=</span><span class="s1">'Beschreibung dieser Datei. Bla bla bla...'</span>
<span class="nv">CONFIG_FILE</span><span class="o">=</span><span class="s1">'/tmp/flash/hugo_file'</span>
<span class="nv">CONFIG_SAVE</span><span class="o">=</span><span class="s1">'modsave flash;'</span>
<span class="nv">CONFIG_TYPE</span><span class="o">=</span><span class="s1">'text'</span>
</pre></div><p>
(Falls die zu bearbeitende Datei zunächst generiert werden muss, kann die nötige Anweisung in <tt>CONFIG_PREPARE</tt> angegeben werden.)
</p>
<p>
Der Daemon, der unsere Arbeiten ausführt, heisst <tt>rc.hugo</tt> und wird unter <tt>/mod/etc/init.d</tt> angelegt.
Die ersten Zeilen müssen so aussehen:
</p>
<div class="code"><pre><span class="c">#!/bin/sh
</span>
<span class="nv">DAEMON</span><span class="o">=</span>hugo

<span class="c"># Liest Paketkonfiguration ein und definiert einige Hilsfunktionen
</span>. /etc/init.d/modlibrc

start<span class="o">()</span> <span class="o">{</span>
         <span class="c"># HIER KOMMEN DIE VERARBEITUNGEN REIN
</span>         <span class="nb">echo</span> <span class="s2">"Starting hugo..."</span>
<span class="o">}</span>

stop<span class="o">()</span> <span class="o">{</span>
         <span class="c"># HIER KOMMEN DIE VERARBEITUNGEN REIN
</span>         <span class="nb">echo</span> <span class="s2">"Stopping hugo..."</span>
<span class="o">}</span>

<span class="k">case</span> <span class="s2">"$1"</span> in
        start<span class="o">)</span>
                start
                ;;
        stop<span class="o">)</span>
                stop
                ;;
        restart<span class="o">)</span>
                stop
                start
                ;;
        status<span class="o">)</span>
                <span class="k">if</span> <span class="o">[</span> -z <span class="s2">"$(pidof "</span><span class="nv">$DAEMON</span><span class="s2">")"</span> <span class="o">]</span>; <span class="k">then
                        </span><span class="nb">echo</span> <span class="s1">'stopped'</span>
                <span class="k">else
                        </span><span class="nb">echo</span> <span class="s1">'running'</span>
                <span class="k">fi</span>
                ;;
     <span class="s2">""</span>|load<span class="o">)</span>
                <span class="c"># CGI registrieren
</span>                modreg cgi <span class="nv">$DAEMON</span> Bezeichnung
                <span class="c"># File registrieren (wird resetfest ins flash gespeichert)
</span>                <span class="c"># modreg file &lt;pkg&gt; &lt;id&gt; &lt;title&gt; &lt;sec-level&gt;  &lt;desc-file (ohne Pfad und .def-Endung)&gt;  
</span>                modreg file <span class="s1">'hugo'</span> <span class="s1">'config'</span> <span class="s1">'HUGO: File'</span> 0 <span class="s2">"hugo_file"</span>
               
                <span class="k">if</span> <span class="o">[</span> <span class="s2">"$HUGO_ENABLED"</span> !<span class="o">=</span> <span class="s2">"yes"</span> <span class="o">]</span>; <span class="k">then
                        </span><span class="nb">echo</span> <span class="s2">"$DAEMON is disabled"</span> 1&gt;&amp;2
                        <span class="nb">exit </span>1
                <span class="k">else
                        </span>start
                <span class="k">fi</span>
                ;;

                ;;
        unload<span class="o">)</span>
                stop
                modunreg file <span class="s1">'hugo'</span>
                modunreg cgi <span class="s1">'hugo'</span>
                ;;
        *<span class="o">)</span>
                <span class="nb">echo</span> <span class="s2">"Usage: $0 [start|stop|restart|status]"</span> 1&gt;&amp;2
                <span class="nb">exit </span>1
                ;;
<span class="k">esac

</span><span class="nb">exit </span>0
</pre></div><p>
Jetzt löschen den cache und bauen wir den Menüpunkt "hugo" in das Webmenü ein.
</p>
<div class="code"><pre>rm /var/mod/var/cache/menu/packages
modreg cgi hugo hugo
</pre></div><p>
<strong>TIPP:</strong> Wenn man ein CGI entwickelt, sollte man seine Arbeiten auf einen angeschlossenen USB-Stick ablegen und die entsprechenden Dateien ins RAM von Freetz kopieren bzw. Softlinks setzen. Hier ein Beispiel für ein kleines Script, welches die Dateien temporär ins RAM kopiert.
</p>
<div class="code"><pre><span class="c">#!/bin/sh
</span>mkdir /mod/etc/default.hugo
cp hugo.cfg /mod/etc/default.hugo
modconf load hugo
<span class="nb">cd</span> /mod/usr/lib/cgi-bin
ln -s /var/media/ftp/uStor01/hugo.cgi hugo.cgi
<span class="nb">cd</span> /mod/etc/init.d
ln -s /var/media/ftp/uStor01/rc.hugo rc.hugo
modreg cgi hugo hugo
<span class="nb">cd</span> -
</pre></div></div>
          
          <div class="trac-modifiedby">
            <span><a href="create_gui%3Faction=diff&amp;version=10.html" title="Version 10 von RomMon">zuletzt geändert</a> <a class="timeline" href="/timeline?from=2014-01-26T21%3A05%3A59Z&amp;precision=second" title="Siehe Journal am 26.01.2014 21:05:59">vor 5 Jahren</a></span>
            <span class="trac-print">Zuletzt geändert am 26.01.2014 21:05:59</span>
          </div>
        
        
      </div><ul class="tags"><li class="header">Tags</li><li><a href="/tags/development" rel="tag">development</a> </li></ul>
      

    </div>
    <script type="text/javascript">
        jQuery.loadStyleSheet("/pygments/trac.css", "text/css");
    </script>
    <div id="altlinks">
      <h3>In anderen Formaten herunterladen:</h3>
      <ul>
        <li class="last first">
          <a rel="nofollow" href="create_gui%3Fformat=txt">Reiner Text</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../../../../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Betrieben mit <a href="/about"><strong>Trac 1.0.1</strong></a><br />
        von <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right"><div class="field" align="right"><form action="https://www.paypal.com/cgi-bin/webscr" method="post"><input type="hidden" name="cmd" value="_donations"/><input type="hidden" name="business" value="spenden@freetz.org"/><input type="hidden" name="item_name" value="Freetz Entwickler-Team"/><input type="hidden" name="no_shipping" value="1"/><input type="hidden" name="return" value="http://freetz.org"/><input type="hidden" name="cn" value="Name oder IPPF-Pseudonym"/><input type="hidden" name="currency_code" value="EUR"/><input type="hidden" name="tax" value="0"/><input type="hidden" name="lc" value="DE"/><input type="hidden" name="bn" value="PP-DonationsBF"/><input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="Zahlen Sie mit PayPal - schnell, kostenlos und sicher!"/><img alt="" border="0" src="/pixel.gif" width="1" height="1"/></form></div></p>
    </div>
  </body>
</html>