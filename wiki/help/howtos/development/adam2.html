

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="de" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="de" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ADAM2-Bootloader &mdash; Freetz master Dokumentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../../_static/language_data.js"></script>
        <script type="text/javascript" src="../../../../_static/translations.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Stichwortverzeichnis" href="../../../../genindex.html" />
    <link rel="search" title="Suche" href="../../../../search.html" />
    <link rel="next" title="Flash-Partitionen im laufenden Betrieb sichern" href="save_mtd_1.html" />
    <link rel="prev" title="Busybox konfigurieren und kompilieren" href="make_busybox.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home"> Freetz
          

          
            
            <img src="../../../../_static/freetz.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Generelles</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../packages_tagged.html">Pakete nach Anwendungsgebieten</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Download.html">Stabile Versionen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Download.html#entwickler-versionen">Entwickler Versionen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Download.html#upload-und-statistik">Upload und Statistik</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Download.html#veraltete-versionen">Veraltete Versionen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../freetz.html">Freetz macht mehr aus der Box!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../FAQ.html">Freetz-FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Impressum.html">Impressum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../libs_tagged.html">Bibliotheken nach Anwendungsgebieten</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ticket.html">Was sollte ich bei der Erstellung eines neuen Tickets beachten?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../style.html">Aussehen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages.html">Pakete, Addons und CGI-Erweiterungen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../FreetzConf2011.html">FreetzConf 2011</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patch.html">Patches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Press.en.html">Freetz in public press &amp; web</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches.html">Freetz Patches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../help.html">Hilfe</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../libs.html">Bibliotheken (libraries)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../costumscript_dublesyslog.html">Schritte zur Lösung, kann übersprungen werden…</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../costumscript_dublesyslog.html#also-hier-die-anleitung-zur-editierung-der-rc-costum-ueber-die-shell">Also hier die Anleitung zur Editierung der rc.costum ueber die shell:</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../costumscript_dublesyslog.html#weiter-durch-die-herleitung-schritte-zur-loesung-whatever">weiter durch die herleitung (schritte zur loesung, whatever)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../costumscript_dublesyslog.html#losung">…Lösung:</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../kernel.html">Tree like overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Press.html">Freetz in Presse und Web</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../freetz.en.html">Freetz gets more from the Box!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../FAQ.en.html">Freetz-FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../common/source_code.en.html">Source code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../common/source_code.html">Quellcode</a></li>
</ul>
<p class="caption"><span class="caption-text">Patches</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/remove_myfritz.html">Remove MyFritz</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/remove_tr069.html">Remove tr069 stuff</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/remove_assistant.html">Remove assistant</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/remove_help.html">Remove help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/remove_usermand.html">Remove usermand &amp; userman.ko</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/remove_samba.html">Remove Samba daemon (smbd)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/signed.html">Patch Webmenu Signed Message</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/remove_upnp.html">Remove uPnP daemon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/usb_names.html">Patch USB storage names, make FAT filesystems world-writable, automount feature</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/remove_mediasrv.html">Remove MediaServer daemon (mediasrv)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/remove_dsld.html">Remove dsld</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/onlinechanged.html">Onlinechanged</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/freetzmount.html">FREETZMOUNT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/replace_onlinechanged.html">Replace onlinechanged</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/remove_capi.html">Remove CapiOverTCP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/exec_autorun.html">Execute autorun.sh/autoend.sh script on (un)mount</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/exec_autorun.html#hinweis">Hinweis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/maxdevcount.html">MaxDevCount</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/remove_minid.html">Remove minid</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/multpile_printers.html">FritzBox als Printserver für mehrere Drucker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/alarmclock.html">Patch third alarm-clock</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/freetzmount.en.html">FREETZMOUNT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/remove_vpn.html">Remove AVM vpn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/remove_support.html">Remove the support-files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/remove_ftpd.html">Remove FTP deamon (ftpd)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/remove_aura_usb.html">Remove aura USB</a></li>
</ul>
<p class="caption"><span class="caption-text">Hilfe</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../howtos.html">HowTos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trouble_shooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fritz_faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../irc.html">Intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../irc.html#irc-netiquette">IRC Netiquette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../irc.html#troubleshooting-irc">Troubleshooting IRC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../irc.html#konfiguration-chatzilla-plugin-in-firefox">Konfiguration Chatzilla-Plugin in Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wikiedit.html">Wiki Bearbeitung - Tipps und Tricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common.html">Allgemeines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshoot.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development.html">Development Howtos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/freetz_linux.html">Freetz Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/shutdown.html">Rechner im Netz herunterfahren</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/newbie.en.html">Freetz for beginners</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/first_trunk.html">Wie baue ich meinen ersten trunk ?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/install.en.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/install.en.html#aktualisierung">Aktualisierung</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/install.en.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/install.en.html#weiterfuhrende-links">Weiterführende Links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/external.html">External</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/external.html#konfiguration">Konfiguration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/external.html#auswahl">Auswahl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/external.html#installation">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/external.html#automatisches-starten-stoppen-von-diensten">Automatisches starten/stoppen von Diensten</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/external.html#firmware-build-prozess-und-update">Firmware-build-Prozess und Update</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/create_swap.html">Swap-File anlegen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/install.html#aktualisierung">Aktualisierung</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/install.html#fehlerbehebung">Fehlerbehebung</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/install.html#manuelles-einspielen-des-images">Manuelles einspielen des Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/install.html#weiterfuhrende-links">Weiterführende Links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/newbie.html">Erste Schritte mit Freetz</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/wol.html">Wake on Lan (WoL) mit der Fritzbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/user.html">Benutzer dauerhaft in der passwd speichern</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/busybox_httpd.html">Kleiner Webserver mit BusyBox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/install/menuconfig.html">Konfiguration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/newbie/other.html">Sonstige Infos für Newbie’s</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/newbie/errors.html">Was mache ich, wenn sich meine Box nicht Freetzen lässt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshoot/repair_phonebook.html">Kaputtes Telefonbuch reparieren</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshoot/recover_firmware.html">Original Firmware wiederherstellen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshoot/reboots.html">Häufige selbständige Reboots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/switch_config.html">Konfiguration des eingebauten Switches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/router_and_firewall.html">Freetz als interner Router mit Firewall</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/user_management.html">Benutzerverwaltung</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/split_wlan_lan.html">WLAN von LAN trennen mit iptables</a></li>
<li class="toctree-l1"><a class="reference internal" href="sign_image.html">Signieren von Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="sign_image.html#konkrete-anwendung-in-freetz">Konkrete Anwendung in Freetz</a></li>
<li class="toctree-l1"><a class="reference internal" href="integrate_patches.html">Patches in Freetz einspielen</a></li>
<li class="toctree-l1"><a class="reference internal" href="bandwidth_svg.html">Dynamische Bandbreitenanzeige per SVG</a></li>
<li class="toctree-l1"><a class="reference internal" href="create_cross-compiler_toolchain.html">Cross-Compiler / Toolchain erstellen</a></li>
<li class="toctree-l1"><a class="reference internal" href="create_cross-compiler_toolchain.html#eigene-download-toolchain-erstellen">Eigene Download-Toolchain erstellen</a></li>
<li class="toctree-l1"><a class="reference internal" href="create_cross-compiler_toolchain.html#target-native-compiler-toolchain-erstellen">Target/Native-Compiler-Toolchain erstellen</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_management.html">Release Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="package_creation.html">Wie baue ich ein eigenes Paket für Freetz?</a></li>
<li class="toctree-l1"><a class="reference internal" href="save_mtd_2.html">Flash-Partitionen von außen mit FTP sichern</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_information.html">Developer Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="create_gui.html">Erstellen einer GUI für Pakete in Freetz</a></li>
<li class="toctree-l1"><a class="reference internal" href="manipulation_detection.html">Wie die FritzBox Manipulationen erkennt</a></li>
<li class="toctree-l1"><a class="reference internal" href="freetz_make.html">Freetz Build-Prozeß</a></li>
<li class="toctree-l1"><a class="reference internal" href="urlader_flags.html">Einstellungen speichern im Urlader-Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="flash.html">Flash Partitionierung</a></li>
<li class="toctree-l1"><a class="reference internal" href="firmware_update_details.html">Ablauf eines Firmware-Updates</a></li>
<li class="toctree-l1"><a class="reference internal" href="repack_fw.html">Entpacken und Packen von Firmware-Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="install_addon.html">Addon Paket installieren</a></li>
<li class="toctree-l1"><a class="reference internal" href="make_busybox.html">Busybox konfigurieren und kompilieren</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">ADAM2-Bootloader</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#bootloader-backup-anlegen">Bootloader-Backup anlegen</a></li>
<li class="toctree-l2"><a class="reference internal" href="#bootloader-uberschreiben">Bootloader überschreiben</a></li>
<li class="toctree-l2"><a class="reference internal" href="#bootloader-befehle">Bootloader-Befehle</a></li>
<li class="toctree-l2"><a class="reference internal" href="#bootloader-quelltext">Bootloader-Quelltext</a></li>
<li class="toctree-l2"><a class="reference internal" href="#aufbau-des-bootloaders">Aufbau des Bootloaders</a></li>
<li class="toctree-l2"><a class="reference internal" href="#bootloader-und-freetz">Bootloader und Freetz</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#anhange-1">Anhänge (1)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="save_mtd_1.html">Flash-Partitionen im laufenden Betrieb sichern</a></li>
<li class="toctree-l1"><a class="reference internal" href="integrate_own_files.html">Eigene Dateien in die Firmware integrieren</a></li>
<li class="toctree-l1"><a class="reference internal" href="analyse_image_names.html">Firmware-Image-Namen analysieren und interpretieren</a></li>
<li class="toctree-l1"><a class="reference internal" href="menuconfig.html">Menükonfiguration pflegen</a></li>
<li class="toctree-l1"><a class="reference internal" href="compile_own_progs.html">Eigene Programme kompilieren</a></li>
<li class="toctree-l1"><a class="reference internal" href="make_kernel.html">Kernel konfigurieren und kompilieren</a></li>
<li class="toctree-l1"><a class="reference internal" href="make_room.html">Platz sparen im Dateisystem der FritzBox</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_information/package_development.html">Package Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_information/post_commit_hook.html">Trac Hooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_information/shell_coding_conventions.html">Shell Coding Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_information/package_development_advanced.html">Package Developing - Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_information/package_development_dynamic.html">Paketverwaltung für Freetz</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_information/package_development_start.html">First steps - How to start your first freetz package</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_information/package_development_start/example_2.html">Example 2: par2cmdline</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_information/package_development_start/example_1.html">Example 1: Httptunnel</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_information/package_development_start/.language.html">.language</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_information/package_development_start/webinterface_example_1.html">Web-interface HTTPTunnel</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_information/package_development_start/example_3.html">Example 3: NZBGet</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_information/webif/libmodcgi.html">libmodcgi.sh</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wikiedit/screenshots.html">Screenshots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wikiedit/toc.html">Inhaltsverzeichnis erstellen (lassen)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wikiedit/tagging.html">Tagging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wikiedit/tables.html">Tabellen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wikiedit/formatting_guide.html">Formatierungs-Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wikiedit/goodies.html">Wiki Goodies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../style/tagging.html">Tagging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../style/skins.html">Skins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../style/favicons.html">Favicons</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../style/mounted.html">Aussehen von mounted.cgi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../libs/ftdi.html">ftdi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../libs/ftdi.en.html">libftdi</a></li>
</ul>
<p class="caption"><span class="caption-text">Pakete</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/bridge-utils.html">bridge-utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/sispmctl.html">sispmctl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/empty.html">Empty</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/apache.html">Apache Webserver mit PHP CGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/polipo.en.html">Using with Tor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/polipo.en.html#using-at-your-office">Using at your office</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/polipo.en.html#security">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/polipo.en.html#blocking-domains">Blocking domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/polipo.en.html#issues">Issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/polipo.en.html#links">Links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/autofs.html">autofs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/strace.html">strace</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/syslogd.html">Syslogd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/lsof.html">lsof</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/dns2tcp.html">Dns2Tcp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/tinyproxy.html">Tinyproxy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/davfs2.html">WebDAV mit davfs2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/s3fslite.html">s3fslite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/dropbear.en.html">Dropbear</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/ctorrent.html">CTorrent</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/irssi.html">irssi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/hplip.html">HPLIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/lighttpd.html">lighttpd Webserver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/privoxy.html">Privoxy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/radvd.en.html">RADVD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/usbroot.html">USB-Root</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/vim.html">vim</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/bluez-utils.html">Bluez-Utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/sane-backends.html">SANE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/usbip.html">USB/IP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/dropbear.html">Dropbear</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/iptables-cgi.html">iptables-cgi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/hd-idle.html">hd-idle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/fhem.html">FHEM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/igmpproxy.html">igmpproxy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/usbutils.html">usbutils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/inotify-tools.html">Inotify-Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/authorized-keys.en.html">authorized-keys</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/rrdstats.html">RRDstats</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/mcabber.html">mcabber</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/dtmfbox.html">DTMFBox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/nfsd.en.html">NFSD_CGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/espeak.html">eSpeak</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/dnsd.html">dnsd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/tor.html">Tor Proxy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/spindown.html">Spindown</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/ncftp.html">ncftp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/lynx.html">Lynx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/smstools3.html">SMStools3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/smstools3.html#weiteres">Weiteres</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/debootstrap.html">Debootstrap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/ppp.html">ppp-cgi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/xmail.html">Links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/sundtek.html">Sundtek DVB Treiber</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/iptables.html">iptables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/iptables.html#altere-beitrage-betreffen-fritzboxen-vor-der-72xx-serie">Ältere Beiträge (betreffen FritzBoxen vor der 72xx Serie)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/subversion.html">Subversion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/dtach.html">dtach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/vsftpd.html">VSFTPd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/ziproxy.html">ziproxy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/ntfs-3g.html">NTFS-3G</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/ruby.html">Ruby</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/aiccu.html">Aiccu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/mc.html">Midnight Commander</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/nfs.html">NFS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/streamripper.html">Streamripper</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/htpdate.html">htpdate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/lua.html">Lua</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/emailrelay.html">E-MailRelay</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/madplay.html">madplay</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/nhipt.html">NHIPT - iptables firewall GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/netsnmp.html">Net-SNMP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/transmission.en.html">Blocklist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/transmission.en.html#number-of-peers">Number of peers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/transmission.en.html#memory-usage">Memory usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/transmission.en.html#limit-memory-usage">Limit memory usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/transmission.en.html#watchdog">Watchdog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/transmission.en.html#links">Links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/imapproxy.en.html">ImapProxy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/fuse.html">FUSE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/hiawatha.html">hiawatha</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/cifsmount.html">cifsmount</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/matrixtunnel.html">matrixtunnel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/ndas.en.html">NDAS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/nfs-utils.html">NFS-Utils / NFS-Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/vpnc.html">vpnc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/haserl.html">Haserl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/obexftp.html">ObexFTP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/nmap.html">Nmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/httptunnel.html">httptunnel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/onlinechanged.html">Onlinechanged</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/mini_fo.html">mini_fo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/pingtunnel.html">pingtunnel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/tcp_wrappers.html">TCP Wrapper</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/netsnmp.en.html">Net-SNMP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/netsnmp.en.html#mrtg">MRTG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/wol.html">Wake on LAN (WoL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/cpmaccfg.html">cpmaccfg</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/cpmaccfg.html#cpmaccfg-cgi">cpmaccfg-cgi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/syslogd.en.html">Syslog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/checkmaild.html">checkmaild 0.4.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/portmap.html">portmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/digitemp.html">Digitemp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/downloader.html">Downloader-CGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/bip.html">BIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/fortune.html">fortune</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/xrelayd.html">xrelayd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/tinc.html">Tinc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/bird.html">Bird</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/onlinechanged_cgi.html">Onlinechanged-CGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/php.html">PHP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/pptp.html">PPTP Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/mediatomb.html">MediaTomb</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/inetd.html">inetd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/owfs.html">owfs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/unbound.html">Unbound</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/fstyp.html">fstyp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/prosody.en.html">Prosody IM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/bftpd.html">Bftpd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/mod.html">(Freetz-) MOD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/br2684ctl.en.html">br2684ctl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/deco.html">Demos Commander</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/trickle.html">trickle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/radvd.html">Radvd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/opendd.html">OpenDD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/pptpd.html">PoPTop - PPTP-VPN-Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/mediaserver.html">Mediaserver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/iptables.en.html">iptables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/dnsd.en.html">dnsd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/hp-utils.html">hp-utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/screen.html">screen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/ndas.html">NDAS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/dnsmasq.html">dnsmasq</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/wget.html">wget</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/e2fsprogs.html">e2fsprogs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/bind.html">bind</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/tcpdump.html">tcpdump</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/gw6.html">gw6</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/nhipt.en.html">NHIPT - iptables firewall GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/openntpd.html">OpenNTPD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/rudi-shell.html">Rudi-Shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/nano.html">nano</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/nfsd.html">NFSD_CGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/stunnel.html">Stunnel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/rrdtool.html">RRDTool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/ldd.html">ldd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/prosody.html">Prosody IM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/fhzctrl.html">fhzctrl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/aiccu.en.html">AICCU</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/authorized-keys.html">authorized_keys</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/pciutils.html">pciutils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/vtund.html">VTUN freetz Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/fritzload.html">FritzLoad</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/jamvm.html">JamVM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/callmonitor.html">Callmonitor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/br2684ctl.html">br2684ctl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/netcat.html">netcat</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/quagga.html">Quagga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/samba.html">Samba</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/iodine.html">iodine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/nagios.html">Nagios</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/smartmontools.html">Smartmontools (smartctl)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/mtr.html">mtr</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/avm-firewall.html">AVM-firewall-cgi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/bash.html">Bash</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/bash.html#ash">Ash</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/bash.html#bash-als-loginshell">Bash als Loginshell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/asterisk.html">Asterisk</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/microperl.html">microperl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/nano-shell.html">Nano-Shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/m-i-t.html">module-init-tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/minidlna.html">MiniDLNA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/inadyn-mt.html">Inadyn-MT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/bluez.html">BlueZ 4.x</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/DemoPackageA.html">DemoPackageA „Hello World“</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/openvpn.html">OpenVPN freetz Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/knock.html">knockd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/ltrace.html">ltrace</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/curl.html">cURL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/inadyn-mt.en.html">Inadyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/virtualip.html">Virtual IP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/socat.html">socat</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/transmission.html">Transmission</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/netsnmp/mrtg.en.html">MRTG</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Freetz</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">Docs</a> &raquo;</li>
        
      <li>ADAM2-Bootloader</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../_sources/wiki/help/howtos/development/adam2.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="adam2-bootloader">
<span id="id1"></span><h1>ADAM2-Bootloader<a class="headerlink" href="#adam2-bootloader" title="Link zu dieser Überschrift">¶</a></h1>
<p>ADAM2 ist ein Bootloader von Texas Intruments, der ähnliche Aufgaben
übernimmt wie ein BIOS beim PC. ADAM2 wurde in abgewandelter Form von
AVM in frühen FRITZBox-Modellen mit Kernel 2.4 eingesetzt, und wich noch
vor Einführung des Kernels 2.6 der aus Nutzersicht nahezu
funktionsgleichen Eigenentwicklung EVA. Wegen der vielen Parallelen
können beide Varianten als „der Bootloader“ betrachtet werden, und
müssen nur in Einzelfällen unterschieden werden.</p>
<p>Die Aufgaben des Bootloaders sind:</p>
<ul class="simple">
<li>die Hardware zu initialisieren</li>
<li>das Flash zu erkennen</li>
<li>das RAM zu erkennen und zu prüfen</li>
<li>die Partitionierung und grundlegende Werkseinstellungen zu verwalten</li>
<li>eine Serielle Konsole bereitzustellen</li>
<li>einen kleinen FTP-Server bereitzustellen (für Recovery)</li>
<li>das Environment im TFFS zu verwalten</li>
<li>das installierte Kernel zu booten</li>
</ul>
<div class="section" id="bootloader-backup-anlegen">
<span id="bootloader-backupanlegen"></span><h2>Bootloader-Backup anlegen<a class="headerlink" href="#bootloader-backup-anlegen" title="Link zu dieser Überschrift">¶</a></h2>
<p>Wer will kann sich ein Bootloader-Backup anlegen sollte sich aber
dringend merken von *genau welcher* Box das war (MAC-Adresse). Mehr
dazu um nächsten Abschnitt.</p>
<p>Die Grösse des Bootloaders wird in der Environment-Variable <code class="docutils literal notranslate"><span class="pre">mtd2</span></code>
gespeichert, die fest im Bootloader selbst eingestellt ist.</p>
<p>Aus Linux heraus hat diese Partition oft eine von <code class="docutils literal notranslate"><span class="pre">2</span></code> abweichende
Nummer die man mit folgendem Befehl ausfindig macht:</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">mtd</span>
</pre></div>
</div>
<p>Eine der dort genannten Partitionen nennt sich <code class="docutils literal notranslate"><span class="pre">bootloader</span></code> oder
<code class="docutils literal notranslate"><span class="pre">urlader</span></code>. Mit deren Nummer (hier z.B. <code class="docutils literal notranslate"><span class="pre">3</span></code>) liesst man dann die
zugehörige <code class="docutils literal notranslate"><span class="pre">mtdblock</span></code> Device aus:</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">mtdblock3</span> <span class="o">&gt;</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">bin</span>
</pre></div>
</div>
<p>Siehe auch <a class="reference external" href="save_mtd_1.html">Flash-Partitionen im laufenden Betrieb
sichern</a>.</p>
<p>ADAM2 ist immer 64KB gross, EVA bei älteren Modellen 64KB, bei neueren
Modellen 128KB oder 256KB. Beim IAD 7570 ist die <code class="docutils literal notranslate"><span class="pre">mtd2</span></code> Partition zwar
256KB, die oberen 128KB sind jedoch leer (0xFF). Dies könnte auf eine
geplante (aber technisch nicht durchführbare) zweite Instanz des
Bootloaders deuten. Die Grösse des Bootloader sollte unbedingt beim
Entwickeln von Aliens beachtet werden. Ein nicht angepasstes <code class="docutils literal notranslate"><span class="pre">install</span></code>
Script für 64KB Bootloader zerstört einen 128KB Bootloader ohne
Vorwarnung! Das gilt dann auch für das AVM Webinteface - die Box wird
vorhersagbar zum Brick.</p>
<p>Daher, wer Aliens entwickelt ohne das Environment des Zielgerätes
geprüft und mit dem <code class="docutils literal notranslate"><span class="pre">install</span></code> Script verglichen zu haben gefährdet
Geräte. Auch im Trunk sollten daher solche riskanten Experimente nur mit
Aufwand freischaltbar sein (implementiert: neuer nicht per GUI
aktivierbarer „Real Developer“ Risiko-Modus).</p>
</div>
<div class="section" id="bootloader-uberschreiben">
<span id="bootloaderuberschreiben"></span><h2>Bootloader überschreiben<a class="headerlink" href="#bootloader-uberschreiben" title="Link zu dieser Überschrift">¶</a></h2>
<p>Kurz: <strong>NEIN!</strong></p>
<p>Der Bootloader enthält zahlreiche Informationen die eine Box einmalig
machen, bei vielen WLAN-Modellen auch Kalibrierung ohne die das Gerät
nicht mehr das selbe ist.</p>
<p>Eine Übertragung ist daher grober Unfug. Auch wenn man diese Angaben
korrekt anpassen würde gibt es ein noch fataleres Problem:</p>
<p>Selbst gleiche Modelle wurden je nach Verfügbarkeit mit
unterschiedlichen Flash- und RAM-Chips bestückt, besonders bei RAM auch
mit Bausteinen mit erheblich abweichenden Eigenschaften (wie Anzahl der
Banks und Timing etc.). Diese Unterschiede werden durch undokumentierte
Konfiguration im Bootloader gesichert. Bootloader-Updates von AVM
übertragen diese Information.</p>
<p><strong>Ein Bootloader ist auch zwischen gleichen Modellen nicht gefahrlos
übertragbar!.</strong></p>
<p>Ohne RAM funktioniert auch ein intakter Bootloader nicht ⇒ Brick.</p>
<p>Um die oben erstellte Sicherung *auf genau die selbe Box*
zurückzuspielen *wäre* dies der Weg:</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="n">bootloader</span><span class="o">.</span><span class="n">bin</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">mtdblock3</span>
</pre></div>
</div>
<p>Selbst dann besteht Brickgefahr. Die MTD Treiber blockieren nicht das
OS. Greift ein anderer Prozess währenddessen z.B. über die ADAM2 API auf
das Environment zu hängt sich das System eventuell während des Schreib-
oder Löschvorgangs auf ⇒ Brick.</p>
<p>Grundsätzlich sollte man daher den Bootloader nur mit geeigneter AVM
Firmware schreiben oder wenn man über Werkzeuge zum debricken (EJTAG)
verfügt.</p>
</div>
<div class="section" id="bootloader-befehle">
<span id="id2"></span><h2>Bootloader-Befehle<a class="headerlink" href="#bootloader-befehle" title="Link zu dieser Überschrift">¶</a></h2>
<ul class="simple">
<li>Die über die Serielle Konsole nutzbaren Befehle findet man im <a class="reference external" href="http://www.wehavemorefun.de/fritzbox/ADAM2_Shell">​ADAM2
Shell</a> Artikel</li>
<li>Die per FTP nutzbaren Befehle findet man im
<a class="reference external" href="http://www.wehavemorefun.de/fritzbox/TinyFTP">​TinyFTP</a> Artikel</li>
</ul>
<p>Bei einigen Modellen wurde aus Sicherheitsgründen die ADAM2 Shell
entfernt. Dies betrifft keine im freien Handel befindliches Geräte, nur
Providermodelle wie die FRITZBox Cable.</p>
<p>Per FTP sind nur Modelle mit mindestens einem LAN-Port erreichbar (und
recoverbar). Daher eignen sich Modelle ohne LAN (einige Repeater) nicht
zum Experimentieren oder Freetzen. Grobe Faustregel: Wenn AVM eine
Recovery bereitstellt ist ein Gerät perfekt zum Freetzen geeignet. Dies
gilt nicht automatisch für von kleineren Providern bereitgestellte
Geräte! Diese können sogenannte „Provider Additive“ enthalten die einen
Werksreset überstehen. Neuere Recoveries verweigern bei solchen Geräten
ihre Funktion, ältere Recoveries zerstören das Additiv (ohne „vor Ort“
Hilfe des Providers irreparabel). Dies dürfte der Grund sein warum AVM
die <a class="reference external" href="ftp://ftp.avm.de/fritz.box/fritzbox.fon_wlan_7570/x_misc/english/">​7570
Recovery</a>
vom FTP-Server entfernte.</p>
<p>Für AVM Speedports gab es nur werksinterne Recoveries für den
Telekom-Service. Diese wurden leider nie veröffentlicht.</p>
<p><strong>Achtung: Im Netz kursieren auch defekte Speedport (sp2fr) Recoveries
die jeden Speedport bricken!</strong></p>
<p>Speedports lassen sich mit geringem Aufwand auch sauber mit Freetz
recovern. Achtung: Howtos, Forenpostings und Windows Tools die MTD3/4
clean empfehlen sind entweder uralt oder ein stümperhafter
Faulheitshack! Details zu den teilweise fatalen Folgen dieser fossilen
Unsitte folgen.</p>
</div>
<div class="section" id="bootloader-quelltext">
<span id="id3"></span><h2>Bootloader-Quelltext<a class="headerlink" href="#bootloader-quelltext" title="Link zu dieser Überschrift">¶</a></h2>
<p>ADAM2 wurde vielen Abnehmern von TI-Chips bereitgestellt und war
eigentlich nie quelloffen. Jeder Hersteller von Geräten modifizierte ihn
dann nach eigenen Bedürfnissen und hielt den Quelltext geschlossen, so
auch AVM. Auch Linksys nutzte eine modifizierte ADAM2 Version, leakte
den Quelltext aber versehentlich in einem wag54g Tarball. Damit änderte
sich nicht der proprietäre Status von ADAM2, er wurde aber zumindest in
der Linksys Variante „Visible Source“ und kann
<a class="reference external" href="http://gpl.back2roots.org/source/WAG54GV2/src/Adam2/">​hier</a>
gestöbert werden. Diese Variante ist aber nur sehr beschränkt für die
FRITZBox aussagekräftig.</p>
<p>Der Quelltext der AVM Variante von ADAM2 wurde nie veröffentlicht.
Lediglich die <a class="reference external" href="http://gpl.back2roots.org/source/fritzbox/ALL_4.06/GPL-release_kernel/linux/drivers/adam2/">​ADAM2
API</a>
zum Erreichen des Environments war quelloffen.</p>
<p>Der Nachfolger EVA basiert nicht auf ADAM2 und ist ein kompletter
funktionskompatibler Rewrite. Im Gegensatz zu ADAM2 unterstützt EVA
direkt komprimierte Kernels und wurde bisher auf mindestens 8
Architekturen portiert. ADAM2 kam nur auf AR7-Modellen mit Kernel 2.4
zum Einsatz. Alle von Freetz erzeugte Firmware benötigt Kernel 2.6 und
EVA.</p>
</div>
<div class="section" id="aufbau-des-bootloaders">
<span id="aufbaudesbootloaders"></span><h2>Aufbau des Bootloaders<a class="headerlink" href="#aufbau-des-bootloaders" title="Link zu dieser Überschrift">¶</a></h2>
<p>Am Anfang eines jeden MIPS-Bootloaders befindet sich eine 8-Byte
„Signatur“. In Wirklichkeit handelt es sich um Assembler-Code zur
Initialisierung des MIPS-Kerns die MIPS netterweise bittet nicht zu
ändern. Diese Befehlssequenz löscht 2 Hälften eines Debug-Registers
(Watchpoint Exception bei „Berührung“ einer Adresse) die im
Normalbetrieb nicht genutzt werden und eignen sich auch wegen der Länge
hervorragend als zuverlässige Signatur. Siehe in diesem
<a class="reference external" href="http://gpl.back2roots.org/source/WAG54GV2/src/Adam2/src/avreset.S">​Quelltext</a>
den Kommentar „First thing: clear watch regs“.</p>
<p>Für Litte Endian Modelle (AR7, UR8) assembliert dies zur Hexfolge
<code class="docutils literal notranslate"><span class="pre">00</span> <span class="pre">90</span> <span class="pre">80</span> <span class="pre">40</span> <span class="pre">00</span> <span class="pre">98</span> <span class="pre">80</span> <span class="pre">40</span></code> die immer am Anfang von <code class="docutils literal notranslate"><span class="pre">mtd2</span></code> (also vom
gesamten Flash) zu finden ist. Bei Big Endian Modellen (AR9, AR10, VR9,
Fusiv) entspricht es der 32-bit gespiegelten Hexfolge
<code class="docutils literal notranslate"><span class="pre">40</span> <span class="pre">80</span> <span class="pre">90</span> <span class="pre">00</span> <span class="pre">40</span> <span class="pre">80</span> <span class="pre">98</span> <span class="pre">00</span></code> und es befinden sich grundsätzlich weitere
Daten davor. Dies ist eine bis zu 1024 Bytes grosse
<a class="reference external" href="https://dev.openwrt.org/browser/trunk/package/uboot-ifxmips/files/cpu/mips/danube/start.S">​Vektortabelle</a>
oder Kalt- und Warmstartvektoren und Code zur Initialisierung der <a class="reference external" href="http://code.metager.de/source/xref/denx/u-boot/arch/mips/cpu/mips32/start.S#44">​hier
ab Zeile
44</a>
genannten EBU-Einheit. Beim AR9, AR10 und VR9 sind dies 24 Bytes (Offset
0x18), beim Fusiv die vollen 1024 Bytes (Offset 0x400). Diese Bytes
gehören natürlich zum Bootloader, die beiden „Signatur-Befehle“
verschieben sich dadurch lediglich.</p>
<p>Zum Ausmaskieren von ARM Bootloadern sind diese Signaturen nicht
geeignet, da ARM Assembler andere Häufigkeitsverteilungen hat. Ein
zuverlässiger Detektor muss also zuerst ARM Code erkennen. Zum Erkennen
von Puma5 (ARM1176BE) Bootloadern gibt es auch eine zuverlässige
Assemblersequenz aus der Lowlevel-Initialisierung. Siehe in
<a class="reference external" href="http://gpl.back2roots.org/source/puma5/netgear/CMD31T_GPL/ti/psp_uboot/src/u-boot-1.2.0/cpu/arm1176/puma5/puma5.h">​diesem</a>
und
<a class="reference external" href="http://gpl.back2roots.org/source/puma5/netgear/CMD31T_GPL/ti/psp_uboot/src/u-boot-1.2.0/board/tnetc550/lowlevel_init.S">​diesem</a>
Quelltext den Kommentar „Unlock CFG MMR region“. Dies assembliert zu
Code der die Hexfolge <code class="docutils literal notranslate"><span class="pre">08</span> <span class="pre">61</span> <span class="pre">1A</span> <span class="pre">38</span> <span class="pre">83</span> <span class="pre">E7</span> <span class="pre">0B</span> <span class="pre">13</span> <span class="pre">08</span> <span class="pre">61</span> <span class="pre">1A</span> <span class="pre">3C</span></code> enthält.
Diese Signatur ist leider nicht am Anfang des Bootloaders zu finden. Bei
der 6360 mit EVA 2070 befindet sie sich an Offset 0xF1AC, also noch in
den ersten 64KB von Puma5 EVA. Leider stehen keine Recoveries zum Testen
der Signatur zur Verfügung. Mit Puma5 EVA oder <a class="reference external" href="http://gpl.back2roots.org/source/puma5/netgear/CMD31T_GPL/ti/psp_uboot/src/u-boot-1.2.0/board/tnetc550/lowlevel_init.o">​U-Boot
Code</a>
funktioniert sie einwandfrei.</p>
<p>Ungeachtet des Offsets erkennt man EVA am 32-bit Wert <code class="docutils literal notranslate"><span class="pre">0x00000002</span></code>
oder <code class="docutils literal notranslate"><span class="pre">0x00000003</span></code> im jeweiligen Endian an Offset 0x580. Dies ist die
Version (fast immer 2, bei brandaktuellen Modellen auch 3) der EVA
<a class="reference external" href="http://www.wehavemorefun.de/fritzbox/ADAM2#Urlader-Konfig">​Urlader-Konfig</a>
in der Teile der Grundeinstellungen im Werk eingetragen werden. Da
EVA-Images in Firmware keine Konfiguration enthalten ist der Wert dort
<code class="docutils literal notranslate"><span class="pre">0xFFFFFFFF</span></code>. Auch ADAM2 enthielt Teile dieser Einstellungen, jedoch
einkompiliert ohne festen Offset.</p>
<p>In beiden Bootloadern sind 8 Default-MAC-Adressen <code class="docutils literal notranslate"><span class="pre">00:04:0E:FF:FF:01</span></code>
- <code class="docutils literal notranslate"><span class="pre">00:04:0E:FF:FF:08</span></code> einkompiliert, die Mindestanforderung für eine
Kommunikation, sollte die Urlader-Konfig defekt oder noch nicht
vorhanden sein. Seit Entwicklung des <a class="reference external" href="http://www.wehavemorefun.de/fritzbox/5188">​VoIP Gateway
5188</a> findet man in EVA
auch das Environment der zweiten CPU fest einkompiliert, da diese über
kein eigenes Flash und daher auch kein TFFS und Environment verfügt und
über NFSRoot bootet. Environment-Variablen können intern nicht nur per
Name angesprochen werden sondern auch per numerischem Index. Dazu wurde
eine Liste numerisch ansprechbarer Variablen einkompiliert die immer mit
<code class="docutils literal notranslate"><span class="pre">AutoMDIX</span></code> anfängt. Bei älteren ADAM2 Urladern endet die Liste nach
der letzten Variable (z.B. <code class="docutils literal notranslate"><span class="pre">wlan_key</span></code>), bei neueren ADAM2 und EVA mit
<code class="docutils literal notranslate"><span class="pre">zuende</span></code>. Diese Tabelle ist quelloffen, da sie auch die Namenstabelle
des TFFS ist, siehe „#if defined(URLADER)“ und „_TFFS_Name_Table“ in
<a class="reference external" href="http://gpl.back2roots.org/source/fritzbox/7270_5.05/GPL-release_kernel/linux/include/linux/tffs.h">​tffs.h</a>.</p>
<p>In allen Recoveries finden sich Fragmente von mindestens einem
Bootloader. In den Anfängen der FRITZBox wurde identische Firmware für
mehrere Modelle umbenannt, die Bootloader jedes dieser Modelle waren
jedoch noch nicht harmonisiert. Entsprechend findet man in Recoveries
aus dieser Zeit multiple Bootloader-Signaturen, da der modellspezifische
Teil mehrfach enthalten war, die modellübergreifende Teil jedoch nicht.</p>
<p>Grundsätzlich ist die Extraktion eines funktionierenden Bootloaders aus
einer Recovery nicht möglich, da der Bootloader aus in der Recovery
enthaltenen Codefragmenten und auf der Box befindlichen
Werkseinstellungen intelligent zusammengebaut wird. Für die
Modellforschung ist die Auffindbarkeit der Fragmente und deren
Grundeinstellungen jedoch interessant. Von 436 analysierten Recoveries
waren etwa 14% ADAM2-MIPSLE, 50% EVA-MIPSLE und die restlichen 36%
EVA-MIPSBE. Bei allen Proben genügte die Auswertung der letzten 256 KB
des mit 7zip isolierbaren <code class="docutils literal notranslate"><span class="pre">.data</span></code> Segments jeder Recovery.exe.</p>
<p>Bei der Umstellung auf Kernel 2.6 mussten einige Modelle auf EVA
umgestellt werden. Daher enthalten einige Firmware-Updates ein
<code class="docutils literal notranslate"><span class="pre">urlader.image</span></code> und passende Programme zur Aktualisierung. In den
Anfängen gab es auch einige ADAM2-Updates, in denen der Dateiname
Modell- und Versionsinformation wie
<code class="docutils literal notranslate"><span class="pre">urlader.Fritz_Box_4MB.97.adam2.image</span></code> enthielt. Im Gegensatz zu den
Fragmenten in Recoveries sind diese immer „fixed-size“ Bootloader mit
Leerbereichen für zu übertragende Konfiguration.</p>
<p>In ADAM2 ist die Version des Urladers als Integer in der Form
<code class="docutils literal notranslate"><span class="pre">urlader-version</span> <span class="pre">\x00</span> <span class="pre">99</span> <span class="pre">\x00</span></code> einkompiliert, bevor es diese Variable
gab in der Form <code class="docutils literal notranslate"><span class="pre">$ProjectRevision:</span> <span class="pre">1.24</span> <span class="pre">$</span></code>, auch mit mehrstelliger
Version wie in
<a class="reference external" href="http://www.akk.org/~enrik/fbox/OLD/boot-06.01.116.txt">​diesem</a>
Bootlog. Bei EVA findet man die Version mit bis zu 3 Bytes Abstand vor
oder hinter der Zeichenfolge <code class="docutils literal notranslate"><span class="pre">%d.%s</span></code> und es muss 1000 hinzugezählt
werden. Ein zusätzliches <code class="docutils literal notranslate"><span class="pre">M</span></code> signalisiert eine modifizierte Variante.
In neueren Recoveries findet man zudem einen <code class="docutils literal notranslate"><span class="pre">.eva</span></code> Dateinamen, z.B.
für die 7360v2 mit EVA 2717M den String <code class="docutils literal notranslate"><span class="pre">1717M.eva</span></code>. In 436
analysierten Recoveries wurden ADAM2 der Versionen 1.20, 1.24, 50 bis 99
und EVA der Versionen 1124 bis 2970 entdeckt (Stand 2014-01). Bei 5 EVA
1190 Recoveries 04.30/31 funktioniert die Versionserkennung nicht, die
Nummer ist dort irgendwo ab Offset 0xF000 relativ zur Signatur zu
finden. Diese müssen per MD5 erkannt werden.</p>
<p>Der älteste in Firmware gefundene Bootloader, ADAM2 Version 1.24, wurde
in der bisher ältesten bekannten Firmware fritz.box_sl.05.01.63.image
vom 30. April 2004 (1 Monat nach Vorstellung der ersten FRITZBox auf der
CeBIT) entdeckt. 4 englische Bootloader der Version 1.20 sind neuer.
Durch getrennte Weiterentwicklung je Modell können ADAM2 Versionen nicht
kalendarisch sortiert werden. Der älteste in Firmware gefundene EVA
Bootloader Version 1124 befindet sich in einer frühen 7170 Recovery.
EVA-Versionen lassen sich auch erst ab etwa 1600 modellübergreifend
kalendarisch sortieren.</p>
<p>Recoveries enthalten zwei weitere leicht zu findende Versionsangaben für
den Programmteil. Über die enthaltenen Firmwarekomponenten sagen sie
nichts aus. Je 2 Beispiele:</p>
<ul class="simple">
<li>FW 3.37:
<code class="docutils literal notranslate"><span class="pre">AVM</span> <span class="pre">Berlin</span> <span class="pre">recover-tool-version:[RECOVER:53][IO_CSP:11]</span> <span class="pre">compiled</span> <span class="pre">at</span> <span class="pre">Feb</span> <span class="pre">18</span> <span class="pre">2005</span> <span class="pre">on</span> <span class="pre">14:24:36</span></code></li>
<li>FW 6.01:
<code class="docutils literal notranslate"><span class="pre">AVM</span> <span class="pre">Berlin</span> <span class="pre">recover-tool-version:[RECOVER:378M][IO_CSP:248]</span> <span class="pre">compiled</span> <span class="pre">at</span> <span class="pre">Aug</span> <span class="pre">23</span> <span class="pre">2013</span> <span class="pre">on</span> <span class="pre">13:52:14</span></code></li>
<li>FW 3.37:
<code class="docutils literal notranslate"><span class="pre">[AVM</span> <span class="pre">Berlin</span> <span class="pre">Wizard</span> <span class="pre">Base</span> <span class="pre">Project,</span> <span class="pre">$ProjectRevision:</span> <span class="pre">1.7</span> <span class="pre">$,</span> <span class="pre">$Date:</span> <span class="pre">2005/02/11</span> <span class="pre">10:47:18Z</span> <span class="pre">$,</span> <span class="pre">kompiliert</span> <span class="pre">am</span> <span class="pre">Feb</span> <span class="pre">14</span> <span class="pre">2005</span> <span class="pre">um</span> <span class="pre">10:10:13]</span></code></li>
<li>FW 6.01:
<code class="docutils literal notranslate"><span class="pre">[AVM</span> <span class="pre">Berlin</span> <span class="pre">Wizard</span> <span class="pre">Base</span> <span class="pre">Project,</span> <span class="pre">$ProjectRevision:</span> <span class="pre">1.63</span> <span class="pre">$,</span> <span class="pre">$Date:</span> <span class="pre">2011/07/04</span> <span class="pre">11:49:20Z</span> <span class="pre">$,</span> <span class="pre">kompiliert</span> <span class="pre">am</span> <span class="pre">Jul</span>&#160; <span class="pre">8</span> <span class="pre">2013</span> <span class="pre">um</span> <span class="pre">11:45:45]</span></code></li>
</ul>
<p>Wie man sieht werden die Komponenten GUI (Wizard), Recover- und I/O-Teil
getrennt entwickelt und kompiliert. Eine heutige Recovery besteht also
aus mindestens 6 Projekten. Auf älteren FRITZBox CDs (z.B. 3020)
befindet sich eine recover.exe ohne integrierte Firmware (etwa 100KB)
der noch ein externes Image bereitgestellt werden musste. Das Programm
nennt sich <code class="docutils literal notranslate"><span class="pre">ar7recover</span></code> und stammt vom Februar 2004, 1 Monat vor
Vorstellung der ersten FRITZBox. Dies dürfte wohl die älteste
veröffentlichte Recovery-Lösung von AVM sein.</p>
<p>Jede Recovery erkennt eine Box an der Urlader-Variable <code class="docutils literal notranslate"><span class="pre">HWRevision</span></code>.
Da der Urlader keinen Zugriff auf den vollständigen Namen eines Modells
hat enthält jede Recovery eine Liste aller bis zum Erstellungsdatum
bekannten HWRevisions und deren Modellnamen. Die Liste befindet sich im
mit <code class="docutils literal notranslate"><span class="pre">7zip</span></code> isolierbaren <code class="docutils literal notranslate"><span class="pre">.rdata</span></code> Segment, bei älteren Recoveries bis
etwa 04.43 ist sie im <code class="docutils literal notranslate"><span class="pre">.data</span></code> Segment oder nicht vorhanden (bisher nur
bei einer 03.14). Zweck der Liste ist die menschenlesbare Anzeige des
gefundenen Modells in der GUI, unabhängig davon ob die Recovery passt.</p>
<p>Die Liste ist bis zu 3 KB gross und fängt immer mit dem String
<code class="docutils literal notranslate"><span class="pre">unknown</span></code> an, gefolgt von nullterminierten Paaren HWR / Boxname, mit
32-bit Padding je String. Der letzte Eintrag ist immer die
<code class="docutils literal notranslate"><span class="pre">FRITZ!Box</span> <span class="pre">SL</span></code> und ihre HWR <code class="docutils literal notranslate"><span class="pre">F</span></code>. Einige Listen ordnen <code class="docutils literal notranslate"><span class="pre">unknown</span></code>
die HWR <code class="docutils literal notranslate"><span class="pre">K</span></code> zu, bei anderen folgt direkt der erste Modellname. Die
Zuordnungpaare sind leider nicht konsistent. So enthält die Liste auch 2
aufeinanderfolgende Namen oder Nummern, aber auch Firmennamen wie AVM
und Telekom. Sie muss also intelligent interpretiert werden. Obwohl die
HWR-Liste auch in aktuellen Recoveries enhalten ist pflegt AVM sie seit
HWR 190 nicht weiter. Recoveries höherer Werte haben zusätzlich den
Zuordnungseintrag für das unterstützte Modell im <code class="docutils literal notranslate"><span class="pre">.data</span></code> Segment, die
HWR gefolgt von mehreren Nullbytes gefolgt vom Namen. Da bei allen
neueren Recoveries das <code class="docutils literal notranslate"><span class="pre">.data</span></code> Segment mit der nullterminierten HWR
anfängt kann diese als Suchstring in den letzten 256 KB des Segments
genutzt werden. Ob und wie bei diesen Recoveries Fremdmodelle mit HWR &gt;
190 erkannt werden muss noch geprüft werden.</p>
<p>Bei der Analyse von 419 Recoveries mit obigem Wissen wurde <a class="reference external" href="/attachment/wiki/help/howtos/development/adam2/hwr.txt">diese
Häufigkeitsverteilung</a><a class="reference external" href="/raw-attachment/wiki/help/howtos/development/adam2/hwr.txt">​</a>
(tab delimited csv) ermittelt. Um Konsistenzfehler auszumaskieren
enthält die Liste nur Zuordnungen die in mindesten 5 Recoveries gefunden
wurden. Die Zähler für HWR &gt; 190 wurden zuvor mit 10 multipliziert.</p>
<p>Die HWR am Anfang des <code class="docutils literal notranslate"><span class="pre">.data</span></code> Segments ist Teil einer Struktur, die in
jeder Recovery mit Kernel 2.6 zu finden ist. Bei neueren Recoveries
findet sie sich an Offset 0, bei älteren an Offset 64 (0x40). Sie
Struktur enthält die unterstützte HWR an Offset 0, die Sprache an Offset
16 (0x10) und die mit Leerzeichen getrennte Liste der unterstützten
Brandings an Offset 32 (0x20). Dies ist sehr nützlich da z.B. EWE
Recoveries nicht am Dateinamen erkennbar sind. Ein vierter String dessen
genauer Zweck noch unklar ist fängt normalerweise an Offset 0x30 an und
verschiebt sich um jeweils 8 Bytes wenn der Brandings-String länger als
8 Bytes ist. Bei Congstar (und vermutlich auch Telekom) Recoveries
enthält er <code class="docutils literal notranslate"><span class="pre">tcom</span></code>, bei allen anderen enthält er unabhängig von Sprache
und Anbieter immer <code class="docutils literal notranslate"><span class="pre">avm</span></code>.</p>
<p>In allen Kernel 2.4 Recoveries befindet sich am Ende des <code class="docutils literal notranslate"><span class="pre">.data</span></code>
Segments eine Reihe von mit einem oder mehreren Nullbytes terminierten
Strings. Dies ist eine 2- oder 3-stellige Zahl unbekannten Zwecks
(leider nicht die HWR) oder der String <code class="docutils literal notranslate"><span class="pre">IE</span></code>, der optionale String
<code class="docutils literal notranslate"><span class="pre">en</span></code> oder <code class="docutils literal notranslate"><span class="pre">de</span></code> und die Firmwareversion in punktierter Schreibweise
(z.B. <code class="docutils literal notranslate"><span class="pre">29.04.01</span></code>) mit dem optionalen Zusatz
<code class="docutils literal notranslate"><span class="pre">-prerelease-&lt;checkpoint&gt;</span></code>. Dahinter steht der optionale String
<code class="docutils literal notranslate"><span class="pre">avm</span></code> oder <code class="docutils literal notranslate"><span class="pre">freenet</span></code>, gefolgt von der optionalen Liste der
unterstützten Brandings. Lediglich die älteste bekannte Recovery mit
integrierter Firmware (03.14) enthält diese Information nicht. Sie ist
deutsch und kannte noch kein Branding. Die HWR muss bei Kernel 2.4
Recoveries aus dem Urlader ermittelt werden.</p>
<p>Der Vergleich der ermittelten Brandings mit den /etc Defaults bestätigt
die Zuverlässigkeit obiger Methoden, sowohl bei Release- als auch bei
Labor-Recoveries. Es existieren allerdings 2 Labor-Recoveries die einen
falschen Bootloader enthalten. Die Datei
<code class="docutils literal notranslate"><span class="pre">FRITZ.Box_2110.04.47-9457.recover-image.exe</span></code> enthält einen HWR 130
Bootloader einer nie auf den Markt gekommenen 2121, die Datei
<code class="docutils literal notranslate"><span class="pre">fritz.box_fon_wlan_7050.04.50.B.telnet.recover-image.exe</span></code> den HWR 94
Bootloader einer 7170.</p>
</div>
<div class="section" id="bootloader-und-freetz">
<span id="bootloaderundfreetz"></span><h2>Bootloader und Freetz<a class="headerlink" href="#bootloader-und-freetz" title="Link zu dieser Überschrift">¶</a></h2>
<p>Da Freetz EVA benötigt sind einige Modelle schon vom Bootloader her
nicht für Freetz geeignet. Grundsätzlich sollte jede Box vor dem
Freetzen mit Originalfirmware aktualisiert werden. Dies aktualisiert
ggf. auch den Bootloader. Für einige ältere Modelle ist evtl. ein
<a class="reference external" href="ftp://service.avm.de/Zwischenupdate/">​Zwischenupdate</a> notwendig.</p>
<p>Für folgende Modelle existiert kein EVA Update:</p>
<ul class="simple">
<li>FRITZBox (alle Versionen)</li>
<li>FRITZBox SL</li>
<li>FRITZBox 2030</li>
<li>FRITZBox Fon (Deutsch A/CH Annex A+B) - mit Tricks evtl. deutsch oder
englisch aktualisierbar</li>
<li>FRITZBox Fon ata (alle Versionen)</li>
<li>FRITZBox Fon WLAN (Deutsch A/CH Annex A+B) - mit Tricks evtl. deutsch
oder englisch aktualisierbar</li>
</ul>
<p>Für einige dieser Modelle könnte Freetz ein EVA Update einer anderen Box
Alien patchen. Bei der FRITZBox SL und 2030 mit 2MB Flash und 8MB RAM
wird es wohl nie Freetz geben.</p>
<div class="section" id="anhange-1">
<h3>Anhänge (1)<a class="headerlink" href="#anhange-1" title="Link zu dieser Überschrift">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="/attachment/wiki/help/howtos/development/adam2/hwr.txt">hwr.txt</a><a class="reference external" href="/raw-attachment/wiki/help/howtos/development/adam2/hwr.txt">​</a>
(4.0 KB) - hinzugefügt von <em>hippie2000</em> <a class="reference external" href="/timeline?from=2014-01-19T21%3A15%3A59Z&amp;precision=second">vor 4
Jahren</a>.
“Komplette HWR-Liste aller 419 bekannten Recoveries, CSV”</li>
</ul>
<p>Alle Anhänge herunterladen als:
<a class="reference external" href="/zip-attachment/wiki/help/howtos/development/adam2/">.zip</a></p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="save_mtd_1.html" class="btn btn-neutral float-right" title="Flash-Partitionen im laufenden Betrieb sichern" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="make_busybox.html" class="btn btn-neutral float-left" title="Busybox konfigurieren und kompilieren" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Freetz Developers

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>