

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="de" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="de" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Konfiguration des eingebauten Switches &mdash; Freetz master Dokumentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../../_static/language_data.js"></script>
        <script type="text/javascript" src="../../../../_static/translations.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Stichwortverzeichnis" href="../../../../genindex.html" />
    <link rel="search" title="Suche" href="../../../../search.html" />
    <link rel="next" title="Freetz als interner Router mit Firewall" href="router_and_firewall.html" />
    <link rel="prev" title="Häufige selbständige Reboots" href="../troubleshoot/reboots.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home"> Freetz
          

          
            
            <img src="../../../../_static/freetz.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Generelles</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../packages_tagged.html">Pakete nach Anwendungsgebieten</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Download.html">Stabile Versionen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Download.html#entwickler-versionen">Entwickler Versionen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Download.html#upload-und-statistik">Upload und Statistik</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Download.html#veraltete-versionen">Veraltete Versionen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../freetz.html">Freetz macht mehr aus der Box!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../FAQ.html">Freetz-FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Impressum.html">Impressum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../libs_tagged.html">Bibliotheken nach Anwendungsgebieten</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ticket.html">Was sollte ich bei der Erstellung eines neuen Tickets beachten?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../style.html">Aussehen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages.html">Pakete, Addons und CGI-Erweiterungen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../FreetzConf2011.html">FreetzConf 2011</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patch.html">Patches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Press.en.html">Freetz in public press &amp; web</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches.html">Freetz Patches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../help.html">Hilfe</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../libs.html">Bibliotheken (libraries)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../costumscript_dublesyslog.html">Schritte zur Lösung, kann übersprungen werden…</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../costumscript_dublesyslog.html#also-hier-die-anleitung-zur-editierung-der-rc-costum-ueber-die-shell">Also hier die Anleitung zur Editierung der rc.costum ueber die shell:</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../costumscript_dublesyslog.html#weiter-durch-die-herleitung-schritte-zur-loesung-whatever">weiter durch die herleitung (schritte zur loesung, whatever)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../costumscript_dublesyslog.html#losung">…Lösung:</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../kernel.html">Tree like overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Press.html">Freetz in Presse und Web</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../freetz.en.html">Freetz gets more from the Box!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../FAQ.en.html">Freetz-FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../common/source_code.en.html">Source code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../common/source_code.html">Quellcode</a></li>
</ul>
<p class="caption"><span class="caption-text">Patches</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/remove_myfritz.html">Remove MyFritz</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/remove_tr069.html">Remove tr069 stuff</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/remove_assistant.html">Remove assistant</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/remove_help.html">Remove help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/remove_usermand.html">Remove usermand &amp; userman.ko</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/remove_samba.html">Remove Samba daemon (smbd)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/signed.html">Patch Webmenu Signed Message</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/remove_upnp.html">Remove uPnP daemon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/usb_names.html">Patch USB storage names, make FAT filesystems world-writable, automount feature</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/remove_mediasrv.html">Remove MediaServer daemon (mediasrv)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/remove_dsld.html">Remove dsld</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/onlinechanged.html">Onlinechanged</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/freetzmount.html">FREETZMOUNT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/replace_onlinechanged.html">Replace onlinechanged</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/remove_capi.html">Remove CapiOverTCP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/exec_autorun.html">Execute autorun.sh/autoend.sh script on (un)mount</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/exec_autorun.html#hinweis">Hinweis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/maxdevcount.html">MaxDevCount</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/remove_minid.html">Remove minid</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/multpile_printers.html">FritzBox als Printserver für mehrere Drucker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/alarmclock.html">Patch third alarm-clock</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/freetzmount.en.html">FREETZMOUNT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/remove_vpn.html">Remove AVM vpn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/remove_support.html">Remove the support-files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/remove_ftpd.html">Remove FTP deamon (ftpd)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patches/remove_aura_usb.html">Remove aura USB</a></li>
</ul>
<p class="caption"><span class="caption-text">Hilfe</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../howtos.html">HowTos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trouble_shooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fritz_faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../irc.html">Intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../irc.html#irc-netiquette">IRC Netiquette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../irc.html#troubleshooting-irc">Troubleshooting IRC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../irc.html#konfiguration-chatzilla-plugin-in-firefox">Konfiguration Chatzilla-Plugin in Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wikiedit.html">Wiki Bearbeitung - Tipps und Tricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common.html">Allgemeines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshoot.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development.html">Development Howtos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/freetz_linux.html">Freetz Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/shutdown.html">Rechner im Netz herunterfahren</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/newbie.en.html">Freetz for beginners</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/first_trunk.html">Wie baue ich meinen ersten trunk ?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/install.en.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/install.en.html#aktualisierung">Aktualisierung</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/install.en.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/install.en.html#weiterfuhrende-links">Weiterführende Links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/external.html">External</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/external.html#konfiguration">Konfiguration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/external.html#auswahl">Auswahl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/external.html#installation">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/external.html#automatisches-starten-stoppen-von-diensten">Automatisches starten/stoppen von Diensten</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/external.html#firmware-build-prozess-und-update">Firmware-build-Prozess und Update</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/create_swap.html">Swap-File anlegen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/install.html#aktualisierung">Aktualisierung</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/install.html#fehlerbehebung">Fehlerbehebung</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/install.html#manuelles-einspielen-des-images">Manuelles einspielen des Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/install.html#weiterfuhrende-links">Weiterführende Links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/newbie.html">Erste Schritte mit Freetz</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/wol.html">Wake on Lan (WoL) mit der Fritzbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/user.html">Benutzer dauerhaft in der passwd speichern</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/busybox_httpd.html">Kleiner Webserver mit BusyBox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/install/menuconfig.html">Konfiguration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/newbie/other.html">Sonstige Infos für Newbie’s</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/newbie/errors.html">Was mache ich, wenn sich meine Box nicht Freetzen lässt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshoot/repair_phonebook.html">Kaputtes Telefonbuch reparieren</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshoot/recover_firmware.html">Original Firmware wiederherstellen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshoot/reboots.html">Häufige selbständige Reboots</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Konfiguration des eingebauten Switches</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#vorwort">Vorwort</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vordefinierte-switch-konfigurationen">Vordefinierte Switch-Konfigurationen</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#modus-special">Modus „special“</a></li>
<li class="toctree-l3"><a class="reference internal" href="#patch-des-standard-modus">Patch des Standard-Modus</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#anpassungen-in-der-ar7-cfg">Anpassungen in der ar7.cfg</a></li>
<li class="toctree-l2"><a class="reference internal" href="#beispiel">Beispiel</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sicherheits-warnung">Sicherheits-Warnung</a></li>
<li class="toctree-l2"><a class="reference internal" href="#kompatibilitat">Kompatibilität</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#anderungen-7270v2-vs-7270v3">Änderungen 7270v2 vs. 7270v3</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="router_and_firewall.html">Freetz als interner Router mit Firewall</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_management.html">Benutzerverwaltung</a></li>
<li class="toctree-l1"><a class="reference internal" href="split_wlan_lan.html">WLAN von LAN trennen mit iptables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/sign_image.html">Signieren von Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/sign_image.html#konkrete-anwendung-in-freetz">Konkrete Anwendung in Freetz</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/integrate_patches.html">Patches in Freetz einspielen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/bandwidth_svg.html">Dynamische Bandbreitenanzeige per SVG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/create_cross-compiler_toolchain.html">Cross-Compiler / Toolchain erstellen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/create_cross-compiler_toolchain.html#eigene-download-toolchain-erstellen">Eigene Download-Toolchain erstellen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/create_cross-compiler_toolchain.html#target-native-compiler-toolchain-erstellen">Target/Native-Compiler-Toolchain erstellen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/release_management.html">Release Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/package_creation.html">Wie baue ich ein eigenes Paket für Freetz?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/save_mtd_2.html">Flash-Partitionen von außen mit FTP sichern</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/developer_information.html">Developer Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/create_gui.html">Erstellen einer GUI für Pakete in Freetz</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/manipulation_detection.html">Wie die FritzBox Manipulationen erkennt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/freetz_make.html">Freetz Build-Prozeß</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/urlader_flags.html">Einstellungen speichern im Urlader-Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/flash.html">Flash Partitionierung</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/firmware_update_details.html">Ablauf eines Firmware-Updates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/repack_fw.html">Entpacken und Packen von Firmware-Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/install_addon.html">Addon Paket installieren</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/make_busybox.html">Busybox konfigurieren und kompilieren</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/adam2.html">ADAM2-Bootloader</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/save_mtd_1.html">Flash-Partitionen im laufenden Betrieb sichern</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/integrate_own_files.html">Eigene Dateien in die Firmware integrieren</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/analyse_image_names.html">Firmware-Image-Namen analysieren und interpretieren</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/menuconfig.html">Menükonfiguration pflegen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/compile_own_progs.html">Eigene Programme kompilieren</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/make_kernel.html">Kernel konfigurieren und kompilieren</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/make_room.html">Platz sparen im Dateisystem der FritzBox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/developer_information/package_development.html">Package Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/developer_information/post_commit_hook.html">Trac Hooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/developer_information/shell_coding_conventions.html">Shell Coding Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/developer_information/package_development_advanced.html">Package Developing - Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/developer_information/package_development_dynamic.html">Paketverwaltung für Freetz</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/developer_information/package_development_start.html">First steps - How to start your first freetz package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/developer_information/package_development_start/example_2.html">Example 2: par2cmdline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/developer_information/package_development_start/example_1.html">Example 1: Httptunnel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/developer_information/package_development_start/.language.html">.language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/developer_information/package_development_start/webinterface_example_1.html">Web-interface HTTPTunnel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/developer_information/package_development_start/example_3.html">Example 3: NZBGet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/developer_information/webif/libmodcgi.html">libmodcgi.sh</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wikiedit/screenshots.html">Screenshots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wikiedit/toc.html">Inhaltsverzeichnis erstellen (lassen)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wikiedit/tagging.html">Tagging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wikiedit/tables.html">Tabellen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wikiedit/formatting_guide.html">Formatierungs-Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wikiedit/goodies.html">Wiki Goodies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../style/tagging.html">Tagging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../style/skins.html">Skins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../style/favicons.html">Favicons</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../style/mounted.html">Aussehen von mounted.cgi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../libs/ftdi.html">ftdi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../libs/ftdi.en.html">libftdi</a></li>
</ul>
<p class="caption"><span class="caption-text">Pakete</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/bridge-utils.html">bridge-utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/sispmctl.html">sispmctl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/empty.html">Empty</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/apache.html">Apache Webserver mit PHP CGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/polipo.en.html">Using with Tor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/polipo.en.html#using-at-your-office">Using at your office</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/polipo.en.html#security">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/polipo.en.html#blocking-domains">Blocking domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/polipo.en.html#issues">Issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/polipo.en.html#links">Links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/autofs.html">autofs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/strace.html">strace</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/syslogd.html">Syslogd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/lsof.html">lsof</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/dns2tcp.html">Dns2Tcp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/tinyproxy.html">Tinyproxy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/davfs2.html">WebDAV mit davfs2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/s3fslite.html">s3fslite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/dropbear.en.html">Dropbear</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/ctorrent.html">CTorrent</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/irssi.html">irssi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/hplip.html">HPLIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/lighttpd.html">lighttpd Webserver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/privoxy.html">Privoxy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/radvd.en.html">RADVD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/usbroot.html">USB-Root</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/vim.html">vim</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/bluez-utils.html">Bluez-Utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/sane-backends.html">SANE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/usbip.html">USB/IP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/dropbear.html">Dropbear</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/iptables-cgi.html">iptables-cgi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/hd-idle.html">hd-idle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/fhem.html">FHEM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/igmpproxy.html">igmpproxy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/usbutils.html">usbutils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/inotify-tools.html">Inotify-Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/authorized-keys.en.html">authorized-keys</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/rrdstats.html">RRDstats</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/mcabber.html">mcabber</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/dtmfbox.html">DTMFBox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/nfsd.en.html">NFSD_CGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/espeak.html">eSpeak</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/dnsd.html">dnsd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/tor.html">Tor Proxy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/spindown.html">Spindown</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/ncftp.html">ncftp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/lynx.html">Lynx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/smstools3.html">SMStools3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/smstools3.html#weiteres">Weiteres</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/debootstrap.html">Debootstrap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/ppp.html">ppp-cgi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/xmail.html">Links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/sundtek.html">Sundtek DVB Treiber</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/iptables.html">iptables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/iptables.html#altere-beitrage-betreffen-fritzboxen-vor-der-72xx-serie">Ältere Beiträge (betreffen FritzBoxen vor der 72xx Serie)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/subversion.html">Subversion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/dtach.html">dtach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/vsftpd.html">VSFTPd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/ziproxy.html">ziproxy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/ntfs-3g.html">NTFS-3G</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/ruby.html">Ruby</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/aiccu.html">Aiccu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/mc.html">Midnight Commander</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/nfs.html">NFS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/streamripper.html">Streamripper</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/htpdate.html">htpdate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/lua.html">Lua</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/emailrelay.html">E-MailRelay</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/madplay.html">madplay</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/nhipt.html">NHIPT - iptables firewall GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/netsnmp.html">Net-SNMP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/transmission.en.html">Blocklist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/transmission.en.html#number-of-peers">Number of peers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/transmission.en.html#memory-usage">Memory usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/transmission.en.html#limit-memory-usage">Limit memory usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/transmission.en.html#watchdog">Watchdog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/transmission.en.html#links">Links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/imapproxy.en.html">ImapProxy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/fuse.html">FUSE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/hiawatha.html">hiawatha</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/cifsmount.html">cifsmount</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/matrixtunnel.html">matrixtunnel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/ndas.en.html">NDAS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/nfs-utils.html">NFS-Utils / NFS-Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/vpnc.html">vpnc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/haserl.html">Haserl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/obexftp.html">ObexFTP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/nmap.html">Nmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/httptunnel.html">httptunnel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/onlinechanged.html">Onlinechanged</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/mini_fo.html">mini_fo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/pingtunnel.html">pingtunnel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/tcp_wrappers.html">TCP Wrapper</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/netsnmp.en.html">Net-SNMP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/netsnmp.en.html#mrtg">MRTG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/wol.html">Wake on LAN (WoL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/cpmaccfg.html">cpmaccfg</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/cpmaccfg.html#cpmaccfg-cgi">cpmaccfg-cgi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/syslogd.en.html">Syslog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/checkmaild.html">checkmaild 0.4.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/portmap.html">portmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/digitemp.html">Digitemp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/downloader.html">Downloader-CGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/bip.html">BIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/fortune.html">fortune</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/xrelayd.html">xrelayd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/tinc.html">Tinc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/bird.html">Bird</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/onlinechanged_cgi.html">Onlinechanged-CGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/php.html">PHP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/pptp.html">PPTP Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/mediatomb.html">MediaTomb</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/inetd.html">inetd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/owfs.html">owfs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/unbound.html">Unbound</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/fstyp.html">fstyp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/prosody.en.html">Prosody IM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/bftpd.html">Bftpd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/mod.html">(Freetz-) MOD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/br2684ctl.en.html">br2684ctl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/deco.html">Demos Commander</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/trickle.html">trickle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/radvd.html">Radvd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/opendd.html">OpenDD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/pptpd.html">PoPTop - PPTP-VPN-Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/mediaserver.html">Mediaserver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/iptables.en.html">iptables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/dnsd.en.html">dnsd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/hp-utils.html">hp-utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/screen.html">screen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/ndas.html">NDAS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/dnsmasq.html">dnsmasq</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/wget.html">wget</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/e2fsprogs.html">e2fsprogs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/bind.html">bind</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/tcpdump.html">tcpdump</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/gw6.html">gw6</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/nhipt.en.html">NHIPT - iptables firewall GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/openntpd.html">OpenNTPD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/rudi-shell.html">Rudi-Shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/nano.html">nano</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/nfsd.html">NFSD_CGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/stunnel.html">Stunnel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/rrdtool.html">RRDTool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/ldd.html">ldd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/prosody.html">Prosody IM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/fhzctrl.html">fhzctrl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/aiccu.en.html">AICCU</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/authorized-keys.html">authorized_keys</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/pciutils.html">pciutils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/vtund.html">VTUN freetz Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/fritzload.html">FritzLoad</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/jamvm.html">JamVM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/callmonitor.html">Callmonitor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/br2684ctl.html">br2684ctl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/netcat.html">netcat</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/quagga.html">Quagga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/samba.html">Samba</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/iodine.html">iodine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/nagios.html">Nagios</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/smartmontools.html">Smartmontools (smartctl)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/mtr.html">mtr</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/avm-firewall.html">AVM-firewall-cgi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/bash.html">Bash</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/bash.html#ash">Ash</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/bash.html#bash-als-loginshell">Bash als Loginshell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/asterisk.html">Asterisk</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/microperl.html">microperl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/nano-shell.html">Nano-Shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/m-i-t.html">module-init-tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/minidlna.html">MiniDLNA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/inadyn-mt.html">Inadyn-MT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/bluez.html">BlueZ 4.x</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/DemoPackageA.html">DemoPackageA „Hello World“</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/openvpn.html">OpenVPN freetz Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/knock.html">knockd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/ltrace.html">ltrace</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/curl.html">cURL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/inadyn-mt.en.html">Inadyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/virtualip.html">Virtual IP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/socat.html">socat</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/transmission.html">Transmission</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/netsnmp/mrtg.en.html">MRTG</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Freetz</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">Docs</a> &raquo;</li>
        
      <li>Konfiguration des eingebauten Switches</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../_sources/wiki/help/howtos/security/switch_config.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="konfiguration-des-eingebauten-switches">
<span id="konfigurationdeseingebautenswitches"></span><h1>Konfiguration des eingebauten Switches<a class="headerlink" href="#konfiguration-des-eingebauten-switches" title="Link zu dieser Überschrift">¶</a></h1>
<p>(für unterstützte Modelle siehe
<a class="reference external" href="switch_config.html#Kompatibilität">unten</a>)</p>
<div class="line-block">
<div class="line">For 7390 read this
<a class="reference external" href="http://www.ip-phone-forum.de/showthread.php?t=287518&amp;p=2185822&amp;viewfull=1#post2185822">​post</a>.</div>
<div class="line">For 7490 it should be possible by altering ar7.cfg. See the following
threads:
<a class="reference external" href="http://www.ip-phone-forum.de/showthread.php?t=273927">​1</a>,
<a class="reference external" href="http://www.ip-phone-forum.de/showthread.php?t=272055">​2</a> and
<a class="reference external" href="http://www.ip-phone-forum.de/showthread.php?t=275391">​3</a>, and
possible others.</div>
</div>
<div class="section" id="vorwort">
<span id="id1"></span><h2>Vorwort<a class="headerlink" href="#vorwort" title="Link zu dieser Überschrift">¶</a></h2>
<p>Einige Modelle aus der FritzBox-Familie besitzen nicht nur einen
LAN-Port, sondern gleich vier, z.B. die 7170. Da ich selber nur die 7170
„persönlich“ kenne, möge man die nachfolgenden Worte in erster Linie als
Anleitung/Beschreibung für dieses Modell verstehen, andere Boxen bitte
ergänzen.</p>
<p>Im Normalbetrieb der 7170 arbeiten die vier Ports wie ein normaler
<a class="reference external" href="http://de.wikipedia.org/wiki/Switch_(Computertechnik)">​Switch</a>,
d.h. alle angeschlossenen Geräte befinden sich im gleichen Subnetz und
können direkt miteinander kommunizieren. Mit Hilfe der Originalfirmware
von AVM ist es aber auch möglich, den LAN 1-Port als WAN-Port zu nutzen
(im Webinterface <em>„Internetzugang via LAN 1“</em> auswählen), z.B. wenn man
die Box an einem Kabelmodem o.ä. betreiben will. Dazu wird der Port von
den verbleibenden drei Ports getrennt und wird als separates
WAN-Netzwerkgerät von der Firmware entsprechend konfiguriert.</p>
<p>Das ist möglich, da in der FritzBox ein konfigurierbarer 5-Port-Switch
eingebaut ist: vier der Ports sind als LAN 1 bis 4 nach außen geführt,
am fünften hängt die eigentliche FritzBox, sprich die CPU. Leider bietet
AVM im Webinterface keine Möglichkeit, die Ports weitergehend
individuell zu konfigurieren. Da dies in bestimmten Fällen aber sehr
hilfreich wäre, entstand das kleine Tool
<a class="reference external" href="http://www.heimpold.de/dsmod/">​cpmaccfg</a>. Es kann via
Telnet/SSH-Zugang auf der FritzBox ausgeführt - oder aber mit
<a class="reference external" href="../../../freetz.html">Freetz</a> direkt in das Firmware-Image
eingebunden werden.</p>
<p>AVM hat die Schnittstelle für die Switchkonfiguration in den
Linux-Netzwerkkartentreiber (<em>avm_cpmac</em>) eingebunden, offenbar gibt es
da eine „alte“ und eine „neue“ Version dieser Schnittstelle. Während die
alte noch sehr weitgehenden Zugriff auf den Switch erlaubt und es
ermöglicht, das volle Potential des Switches auszuschöpfen, ist die neue
etwas „abstrakter“ gehalten, was dazu führt, dass man nur noch zwischen
verschiedenen vordefinierten Konfigurationen auswählen kann. Wer vollen
Zugriff braucht, kann aber die alte Schnittstelle durch Hinzufügen von 2
Zeilen Kernelquellcode wieder aktivieren. In Freetz passiert dies beim
Einbinden von <code class="docutils literal notranslate"><span class="pre">cpmaccfg</span></code> automatisch, wenn in
<a class="reference external" href="../common/install/menuconfig.html">menuconfig</a> <code class="docutils literal notranslate"><span class="pre">replace</span> <span class="pre">kernel</span></code>
ausgewählt wird.</p>
<p>Das Tool cpmaccfg funktioniert auch beim Speedport W900V.</p>
</div>
<div class="section" id="vordefinierte-switch-konfigurationen">
<span id="vordefinierteswitch-konfigurationen"></span><h2>Vordefinierte Switch-Konfigurationen<a class="headerlink" href="#vordefinierte-switch-konfigurationen" title="Link zu dieser Überschrift">¶</a></h2>
<p>AVM selbst hat im Kernelmodul schon verschiedene vordefinierte
Konfigurationen hinterlegt, eine ist davon ist die bereits erwähnte
Variante „Internetzugang via LAN 1“, intern als ATA-Modus bezeichnet.
Hier ein Überblick über alle vordefinierten Modi:</p>
<ul class="simple">
<li><strong>normal</strong>: alle vier Ports arbeiten wie ein normaler Switch, der
Kernel verwendet eth0 als Netzwerkinterface (jenachdem, ob „Alle
Computer befinden sich im selben Subnetz“ angekreuzt ist, wird <em>eth0</em>
noch mit den WLAN-Interfaces zu einem „lan“-Interface
zusammengebridged)</li>
<li><strong>ata</strong>: LAN 1 kommt im Kernel als „wan“ an, die drei anderen Ports
als „eth0“ (eventuelle Einbindung von <em>eth0</em> in Bridge wie im
Normalmodus)</li>
<li><strong>split</strong>: jedem Port wird ein einzelnes Interface zugeordnet, also
„eth0“, „eth1“…</li>
<li><strong>split_ata</strong>: wie split, jedoch bekommt LAN 1 die Bezeichnung „wan“</li>
<li><strong>all_ports</strong>: im Grunde wie normal, genauer Sinn &amp; Zweck noch
unbekannt (eventuell für Boxen mit mehr als 4 Ports gedacht?)</li>
<li><strong>special</strong>: siehe unten</li>
</ul>
<div class="line-block">
<div class="line">Richtig Sinn ergibt das Wechseln des Modus natürlich nur, wenn man das
Häkchen bei <em>„Alle Computer befinden sich im selben Subnetz“</em> nicht
setzt, weil sonst alle verfügbaren Devices in eine Bridge gesteckt
werden.</div>
<div class="line"><strong>UPDATE:</strong> Es funktioniert ebenfalls sauber im
„ethmode=ethmode_bridge“ da dann die Devices aus der „Bridge“-Sektion
genommen werden (und eben <strong>nicht</strong> aus der „eth“-Sektion).</div>
<div class="line">Im „Eth-Bridge“-Modus werden diese „einzelnen“ „realen“ ethX dann
jeweils in die angegebene Bridge intergiert. Ist ganz praktisch wenn
man das USB Device („usbrndis“) mal zu einem der 4 Ports zuordnen
möchte.</div>
<div class="line">Der Trick dabei ist das konfigurierte ethx-IF in der „eth“-Sektion
auch in der Bridge-Sektion aufgeführt sind.</div>
<div class="line">Beispiel:</div>
<div class="line">Man möchte LAN1 und LAN4 als eth2 und LAN2 und LAN3 als eth0
konfigurieren.</div>
<div class="line">Dann hat man in der „eth-Sektion“ eth0 und eth2 und in der
Bridge-Sektion z.B. die Bridge lan (mit if eth0) und Bridge xnet (mit
if eth2)</div>
<div class="line">Hat man beides in der ar7.cfg sauber stehen kann man problemlos
zwichen „ethmode=ethmode_bridge“ und „ethmode=ethmode_router“
(„AVM-deutsch: „alle Computer befinden sich im selben Netzwerk“)
umschalten (Haken setzen oder auch nicht). Und eben jetzt kann man im
„ethmode=ethmode_bridge“ z.B. der Bridge „xnet“ die Interfaces eth2
und usbrndis zuordnen. Wie genau die ar7.cfg konfiguriert wird steht
weiter unten in diesem Artikel.</div>
</div>
<p>Den aktuellen Modus kann man mit Hilfe von <code class="docutils literal notranslate"><span class="pre">cpmaccfg</span> <span class="pre">gsm</span></code> abfragen,
setzen ist mit <code class="docutils literal notranslate"><span class="pre">cpmaccfg</span> <span class="pre">ssm</span> <span class="pre">&lt;zielmodus&gt;</span></code> möglich.</p>
<div class="section" id="modus-special">
<span id="modusspecial"></span><h3>Modus „special“<a class="headerlink" href="#modus-special" title="Link zu dieser Überschrift">¶</a></h3>
<p>Mit einem gepatchtem Kernel ist auch möglich, eigene individuelle
Port-Konfigurationen zu erstellen. Dazu dient der Modus „special“, der
quasi als Platzhalter für eine Konfiguration im Kernel vorhanden ist.
Dieser Platzhalter muss zunächst mittels <code class="docutils literal notranslate"><span class="pre">cpmaccfg</span> <span class="pre">ssms</span> <span class="pre">...</span></code> gefüllt
werden, anschließend kann mit <code class="docutils literal notranslate"><span class="pre">cpmaccfg</span> <span class="pre">ssm</span> <span class="pre">special</span></code> auf diese
Konfiguration umgeschaltet werden.</p>
</div>
<div class="section" id="patch-des-standard-modus">
<span id="patchdesstandard-modus"></span><h3>Patch des Standard-Modus<a class="headerlink" href="#patch-des-standard-modus" title="Link zu dieser Überschrift">¶</a></h3>
<p>Die Nutzung des Special-Modus hat den Nachteil, dass die Modus erst
während des Startvorganges der Box aktiviert werden muss. Bei einer
Änderung des standardmäßig in der Box verwendeten Modus, wie z.B.
<code class="docutils literal notranslate"><span class="pre">NORMAL</span></code> oder <code class="docutils literal notranslate"><span class="pre">ATA</span></code>, wird der Switch automatisch beim Starten der
Box passend aufgeteilt.</p>
<p>Für diese Änderung ist es notwendig, den gewünschten Modus in der Datei
<code class="docutils literal notranslate"><span class="pre">linux-2.6.19.2/drivers/net/avm_cpmac/cpphy_adm6996.c</span></code> zu patchen. Das
folgende Beispiel beschreibt die Aufteilung des Switch in die beiden
Interface eth0 mit LAN1 und LAN2 sowie eth1 mit LAN3 und LAN4. Der
folgende Patch wurde für eine 7270 mit Firmware 76 erstellt.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---</span> <span class="n">linux</span><span class="o">-</span><span class="mf">2.6</span><span class="o">.</span><span class="mf">19.2</span><span class="o">/</span><span class="n">drivers</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">avm_cpmac</span><span class="o">/</span><span class="n">cpphy_adm6996</span><span class="o">.</span><span class="n">c_orig</span>   <span class="mi">2009</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">08</span> <span class="mi">13</span><span class="p">:</span><span class="mi">59</span><span class="p">:</span><span class="mf">52.000000000</span> <span class="o">+</span><span class="mi">0200</span>
<span class="o">+++</span> <span class="n">linux</span><span class="o">-</span><span class="mf">2.6</span><span class="o">.</span><span class="mf">19.2</span><span class="o">/</span><span class="n">drivers</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">avm_cpmac</span><span class="o">/</span><span class="n">cpphy_adm6996</span><span class="o">.</span><span class="n">c</span>        <span class="mi">2009</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">20</span> <span class="mi">10</span><span class="p">:</span><span class="mi">57</span><span class="p">:</span><span class="mf">14.000000000</span> <span class="o">+</span><span class="mi">0200</span>
<span class="o">@@</span> <span class="o">-</span><span class="mi">137</span><span class="p">,</span><span class="mi">9</span> <span class="o">+</span><span class="mi">137</span><span class="p">,</span><span class="mi">10</span> <span class="o">@@</span>
                                         <span class="p">{</span> <span class="p">{</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">}</span>
                                         <span class="p">}</span>
                                    <span class="p">},</span>
<span class="o">-</span>        <span class="o">/*</span> <span class="n">CPMAC_MODE_NORMAL</span>    <span class="o">*/</span> <span class="p">{</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span>
<span class="o">-</span>                                        <span class="p">{</span> <span class="p">{</span><span class="s2">&quot;eth0&quot;</span><span class="p">,</span> <span class="mh">0x2f</span><span class="p">}</span>
<span class="o">-</span>                                        <span class="p">}</span>
<span class="o">+</span>        <span class="o">/*</span> <span class="n">CPMAC_MODE_NORMAL</span>    <span class="o">*/</span> <span class="p">{</span> <span class="mi">2</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span>
<span class="o">+</span>                                        <span class="p">{</span> <span class="p">{</span><span class="s2">&quot;eth0&quot;</span><span class="p">,</span> <span class="mh">0x23</span><span class="p">},</span>
<span class="o">+</span>                                                 <span class="p">{</span><span class="s2">&quot;eth1&quot;</span><span class="p">,</span> <span class="mh">0x2c</span><span class="p">}</span>
<span class="o">+</span>                                       <span class="p">}</span>
                                    <span class="p">},</span>
         <span class="o">/*</span> <span class="n">CPMAC_MODE_ATA</span>       <span class="o">*/</span> <span class="p">{</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                         <span class="p">{</span> <span class="p">{</span><span class="s2">&quot;wan&quot;</span><span class="p">,</span>  <span class="mh">0x21</span><span class="p">},</span>
</pre></div>
</div>
<p>Den Patch in das Verzeichnis <code class="docutils literal notranslate"><span class="pre">/make/linux/patches/2.6.19.2</span></code> oder ggf.
Unterordner wie z.B. <code class="docutils literal notranslate"><span class="pre">7270_04.76</span></code> kopieren.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">menuconfig</span>
</pre></div>
</div>
<p>Box konfigurieren und die Option „Replace Kernel“ auswählen</p>
<p>Bestehenden Kernel löschen:</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">kernel</span><span class="o">-</span><span class="n">dirclean</span>
</pre></div>
</div>
<p>Kernel-Sourcen bereitstellen und Patchen</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">kernel</span><span class="o">-</span><span class="n">source</span>
</pre></div>
</div>
<p>Hier kann noch kontrolliert werden, ob der Patch korrekt durchgeführt
wird. z.B.:</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">applying</span> <span class="n">patch</span> <span class="n">file</span> <span class="n">make</span><span class="o">/</span><span class="n">linux</span><span class="o">/</span><span class="n">patches</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mf">19.2</span><span class="o">/</span><span class="mf">7270_04.76</span><span class="o">/</span><span class="mi">990</span><span class="o">-</span><span class="n">cpmac</span><span class="o">.</span><span class="n">patch</span>
<span class="n">patching</span> <span class="n">file</span> <span class="n">linux</span><span class="o">-</span><span class="mf">2.6</span><span class="o">.</span><span class="mf">19.2</span><span class="o">/</span><span class="n">drivers</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">avm_cpmac</span><span class="o">/</span><span class="n">cpphy_adm6996</span><span class="o">.</span><span class="n">c</span>
</pre></div>
</div>
<p>Dann noch das Image erstellen:</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="anpassungen-in-der-ar7-cfg">
<span id="anpassungeninderar7-cfg"></span><h2>Anpassungen in der ar7.cfg<a class="headerlink" href="#anpassungen-in-der-ar7-cfg" title="Link zu dieser Überschrift">¶</a></h2>
<p>Die Anpassungen der ar7.cfg stellen sicher, dass die Änderungen auch bei
verschiedenen Konfiguationsänderungen, wie z.B. Aus- und Einschalten des
Wlan bestehen und und automatisch konfiguriert werden und bleiben.</p>
<p>Kopie der ar7.cfg erstellen und diese bearbeiten:</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">tmp</span>
<span class="n">cat</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">flash</span><span class="o">/</span><span class="n">ar7</span><span class="o">.</span><span class="n">cfg</span> <span class="o">&gt;</span> <span class="n">ar7</span><span class="o">.</span><span class="n">cfg</span>
<span class="n">vi</span> <span class="n">ar7</span><span class="o">.</span><span class="n">cfg</span>
</pre></div>
</div>
<p>Box muss sich im Modus „Router“ befinden, dies wird mit der Option
<code class="docutils literal notranslate"><span class="pre">ethmode</span></code> in der ar7.cfg eingestellt.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ethmode</span> <span class="o">=</span> <span class="n">ethmode_router</span><span class="p">;</span>
</pre></div>
</div>
<p>Dann muss noch der Bereich <code class="docutils literal notranslate"><span class="pre">ethinterfaces</span></code> verändert werden.</p>
<p>Bei der Konfiguration ist folgendes zu beachten. Nur den dort
vorhandenen wird eine IP-Adresse zugewiesen. Alle anderen Interfaces
existieren zwar und können über ifconfig abgefragt oder ggf. manuell
konfiguriert werden.</p>
<p>Bei den Devices kann über die Option „interfaces“ Bridges automatisch
gebildet werden. Das folgende Beispiel beschreibt die Konfiguration
zweier Devices intern und extern.</p>
<div class="line-block">
<div class="line">Das Device <code class="docutils literal notranslate"><span class="pre">extern</span></code> wird aus dem Interface „eth1“ mit der Adresse
192.168.1.1 gebildet, das Device <code class="docutils literal notranslate"><span class="pre">intern</span></code> aus eth0 und den
verschiedenen WLan-Interfaces mit der Adresse 192.168.0.1.</div>
<div class="line"><strong>UPDATE</strong>: Wie ihr seht funktioniert das „bridgen“ bereits auch
sauber in der eth-Sektion! (und AVM hat es ja auch selber mit dem
wlan-IF so gemacht)</div>
</div>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ethinterfaces</span> <span class="p">{</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;extern&quot;</span><span class="p">;</span>
        <span class="n">dhcp</span> <span class="o">=</span> <span class="n">no</span><span class="p">;</span>
        <span class="n">ipaddr</span> <span class="o">=</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">1.1</span><span class="p">;</span>
        <span class="n">netmask</span> <span class="o">=</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.0</span><span class="p">;</span>
        <span class="n">dstipaddr</span> <span class="o">=</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="p">;</span>
        <span class="n">interfaces</span> <span class="o">=</span> <span class="s2">&quot;eth1&quot;</span><span class="p">;</span>
        <span class="n">dhcpenabled</span> <span class="o">=</span> <span class="n">no</span><span class="p">;</span>
        <span class="n">dhcpstart</span> <span class="o">=</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="p">;</span>
        <span class="n">dhcpend</span> <span class="o">=</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="p">;</span>
<span class="p">}</span> <span class="p">{</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;eth0:0&quot;</span><span class="p">;</span>
        <span class="n">dhcp</span> <span class="o">=</span> <span class="n">no</span><span class="p">;</span>
        <span class="n">ipaddr</span> <span class="o">=</span> <span class="mf">169.254</span><span class="o">.</span><span class="mf">1.1</span><span class="p">;</span>
        <span class="n">netmask</span> <span class="o">=</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">0.0</span><span class="p">;</span>
        <span class="n">dstipaddr</span> <span class="o">=</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="p">;</span>
        <span class="n">dhcpenabled</span> <span class="o">=</span> <span class="n">yes</span><span class="p">;</span>
        <span class="n">dhcpstart</span> <span class="o">=</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="p">;</span>
        <span class="n">dhcpend</span> <span class="o">=</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="p">;</span>
<span class="p">}</span> <span class="p">{</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;intern&quot;</span><span class="p">;</span>
        <span class="n">dhcp</span> <span class="o">=</span> <span class="n">no</span><span class="p">;</span>
        <span class="n">ipaddr</span> <span class="o">=</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">0.1</span><span class="p">;</span>
        <span class="n">netmask</span> <span class="o">=</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.0</span><span class="p">;</span>
        <span class="n">dstipaddr</span> <span class="o">=</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="p">;</span>
        <span class="n">interfaces</span> <span class="o">=</span> <span class="s2">&quot;eth0&quot;</span><span class="p">,</span> <span class="s2">&quot;ath0&quot;</span><span class="p">,</span> <span class="s2">&quot;wdsup1&quot;</span><span class="p">,</span> <span class="s2">&quot;wdsdw1&quot;</span><span class="p">,</span> <span class="s2">&quot;wdsdw2&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;wdsdw3&quot;</span><span class="p">,</span> <span class="s2">&quot;wdsdw4&quot;</span><span class="p">;</span>
        <span class="n">dhcpenabled</span> <span class="o">=</span> <span class="n">no</span><span class="p">;</span>
        <span class="n">dhcpstart</span> <span class="o">=</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">0.20</span><span class="p">;</span>
        <span class="n">dhcpend</span> <span class="o">=</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">0.200</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Dann die bestehende <code class="docutils literal notranslate"><span class="pre">ar7.cfg</span></code> durch die veränderte Datei
überschreiben:</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">ar7</span><span class="o">.</span><span class="n">cfg</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">flash</span><span class="o">/</span><span class="n">ar7</span><span class="o">.</span><span class="n">cfg</span>
</pre></div>
</div>
<p>Dann die Änderungen mit einen Reboot oder <code class="docutils literal notranslate"><span class="pre">ar7cfgchanged</span></code> aktivieren.</p>
<div class="line-block">
<div class="line">Ergänzung:</div>
<div class="line">Auch der special Modus kann über die ar7.cfg konfiguriert werden.</div>
<div class="line">Als Beispiel ein Ausschnitt aus einer Alice Konfiguration)</div>
</div>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cpmacspecial</span> <span class="p">{</span>
      <span class="n">enabled</span> <span class="o">=</span> <span class="n">yes</span><span class="p">;</span>
      <span class="n">normalcfg</span> <span class="o">=</span> <span class="s2">&quot;eth0,1,2,3&quot;</span><span class="p">,</span> <span class="s2">&quot;eth3,4&quot;</span><span class="p">;</span>
      <span class="n">atacfg</span> <span class="o">=</span> <span class="s2">&quot;wan,1&quot;</span><span class="p">,</span> <span class="s2">&quot;eth0,2,3&quot;</span><span class="p">,</span> <span class="s2">&quot;eth3,4&quot;</span><span class="p">;</span>
  <span class="p">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">und ein Anderes mit „split“ Interfaces</div>
</div>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cpmacspecial</span> <span class="p">{</span>
    <span class="n">enabled</span> <span class="o">=</span> <span class="n">yes</span><span class="p">;</span>
    <span class="n">normalcfg</span> <span class="o">=</span> <span class="s2">&quot;eth0,1&quot;</span><span class="p">,</span> <span class="s2">&quot;eth1,2&quot;</span><span class="p">,</span> <span class="s2">&quot;eth2,3&quot;</span><span class="p">,</span> <span class="s2">&quot;eth3,4&quot;</span><span class="p">;</span>
    <span class="n">atacfg</span> <span class="o">=</span> <span class="s2">&quot;wan,1&quot;</span><span class="p">,</span> <span class="s2">&quot;eth1,2&quot;</span><span class="p">,</span> <span class="s2">&quot;eth2,3&quot;</span><span class="p">,</span> <span class="s2">&quot;eth3,4&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">Der Syntax:</div>
<div class="line">modus = portmapping[, …]</div>
<div class="line">modus =: normalcfg|atacfg</div>
<div class="line">portmapping =: „netdevname,portnum[,…]“</div>
<div class="line">netdevname =: wan|eth<a class="reference external" href="/log/?revs=0-3">[0-3]</a> (aber vielleicht
auch eigener Namen)</div>
<div class="line">portnum =: <a class="reference external" href="/log/?revs=1-4">[1-4]</a> (so vielen wie es auf das Gerät
gibt)</div>
</div>
</div>
<div class="section" id="beispiel">
<span id="id2"></span><h2>Beispiel<a class="headerlink" href="#beispiel" title="Link zu dieser Überschrift">¶</a></h2>
<p>Die vier Ports sollen in zwei Gruppen aufgeteilt werden: LAN 1 und LAN 2
sollen für das interne Netz zur Verfügung stehen (als eth0), LAN 3 und
LAN 4 werden zwei <a class="reference external" href="http://www.freifunk.net/">​Freifunk</a>-Router
angeschlossen, die zusammen in einem separaten Subnetz stecken (als
<em>eth1</em>), vom internen LAN also getrennt sein sollen.</p>
<p>Ruft man <code class="docutils literal notranslate"><span class="pre">cpmaccfg</span></code> ohne weitere Parameter auf, erscheint eine knappe
Übersicht über Kommandos und Parameter. Damit ermittelt man, welche
<em>PORTMASK</em> für die jeweiligen Interfaces zu verwenden ist. Diese
Portmaske ergibt sich aus der Logischen-Oder-Verknüpfung der jeweiligen
Portkonstanten. Das sind folgende Werte: LAN 1 = 0x01, LAN 2 = 0x02, LAN
3 = 0x04, LAN 4 = 0x08 und der CPU-Port ist 0x20.</p>
<p>Für das obige Beispiel muss also folgender Befehl aufgerufen werden:</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cpmaccfg</span> <span class="n">ssms</span> <span class="n">eth0</span> <span class="mh">0x23</span> <span class="n">eth1</span> <span class="mh">0x2c</span>
</pre></div>
</div>
<p>Man beachte, dass in beiden Portmasken der CPU-Port eingeschlossen
wurde. Macht man dies nicht, entsteht zwar das Interface, es „sieht“
aber keinen Traffic (noch nicht probiert, zu überprüfen).</p>
<p>Anschließen kann mit <code class="docutils literal notranslate"><span class="pre">cpmaccfg</span> <span class="pre">ssm</span> <span class="pre">special</span></code> diese Konfiguration
aktiviert werden.</p>
</div>
<div class="section" id="sicherheits-warnung">
<span id="id3"></span><h2>Sicherheits-Warnung<a class="headerlink" href="#sicherheits-warnung" title="Link zu dieser Überschrift">¶</a></h2>
<p>Beim Booten startet die Box immer im Modus <strong>normal</strong>, d.h.: wie und wo
man auch immer die Umschaltung in den gewünschten Modus realisiert (z.B.
per <code class="docutils literal notranslate"><span class="pre">debug.cfg</span></code> oder in einem Freetz Startup-Skript), es existiert
immer eine gewisse Zeitspanne, in der sich alle vier Ports im gleichen
„Layer 2-Subnetz“ befinden. Erst nachdem die Umschaltung erfolgt ist,
befinden sich die Ports in getrennten „Layer 2-Netzen“. Erst dann muss
eine Kommunikation über Layer 3 (IP-Ebene) erfolgen, wo eventuelle
iptables-Regeln greifen (oder halt die interne AVM-Firewall).</p>
<p>Schon bevor der Kernel bootet, wird der Switch vom Bootloader als
normaler Switch konfiguriert. Die Konfiguration im Kernel umzustellen
verkürzt die Zeitspanne etwas, beseitigt aber nicht das grundsätzliche
Problem.</p>
<p>Da für den Bootloader keine Quelltexte frei verfügbar sind, wäre ein
Anpassung schwierig.</p>
</div>
<div class="section" id="kompatibilitat">
<span id="id4"></span><h2>Kompatibilität<a class="headerlink" href="#kompatibilitat" title="Link zu dieser Überschrift">¶</a></h2>
<ul class="simple">
<li><strong>FB 7170, Speedports W900V, W701V</strong> Diese Boxen haben einen
eingebauten Switch (ADM6996), <code class="docutils literal notranslate"><span class="pre">cpmaccfg</span></code> funktioniert.</li>
<li><strong>7270/3270</strong> Tantos-Switches: cpmaccfg funktioniert
(<a class="reference external" href="http://www.ip-phone-forum.de/showpost.php?p=1599909&amp;postcount=23">​Beweis</a>)</li>
<li><strong>Alice IAD 5130, Alice IAD WLAN 3331, FB 5140/3170/2170</strong>
funktionieren ebenfalls problemlos (jeweilige akt. Firmware)
(cpmaccfg ebenso).</li>
<li><strong>5124</strong> sollte ebenfalls sauber funktionieren</li>
<li><strong>7050</strong> Kein Switch-Baustein vorhanden, es handelt sich um richtige
Netzwerkinterfaces.</li>
<li><strong>7320</strong> wie 7050/5050 Boxen. Es sind reale Netz-IF (eth0 &amp; eth1)
welche auch getrennt koniguriert werden können (und das sogar
permanent in der ar7.cfg im Bridgemode).</li>
</ul>
<div class="section" id="anderungen-7270v2-vs-7270v3">
<span id="anderungen7270v2vs-7270v3"></span><span id="a"></span><h3>Änderungen 7270v2 vs. 7270v3<a class="headerlink" href="#anderungen-7270v2-vs-7270v3" title="Link zu dieser Überschrift">¶</a></h3>
<p>Bei der 7270v3/3270v3 hat sich der CPU Port von Bit5 auf Bit0 verschoben
und die Interface Ports sind um eins nach links gerückt. Für das obige
Beispiel muss also folgender Befehl auf der 7270v3 aufgerufen werden:</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cpmaccfg</span> <span class="n">ssms</span> <span class="n">eth0</span> <span class="mh">0x07</span> <span class="n">eth1</span> <span class="mh">0x19</span>

<span class="c1"># eth0: Maske 0000 0111</span>
<span class="c1"># eth1: Maske 0001 1001</span>

<span class="c1"># 7270v3: 0001 1111               7270v2: 0010 1111</span>
<span class="c1">#                 x---- CPU Port -----------x</span>
<span class="c1">#                x----- Port 1   -----------------x</span>
<span class="c1">#               x------ Port 2   ----------------x</span>
<span class="c1">#              x------- Port 3   ---------------x</span>
<span class="c1">#            x--------- Port 4   --------------x</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="router_and_firewall.html" class="btn btn-neutral float-right" title="Freetz als interner Router mit Firewall" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../troubleshoot/reboots.html" class="btn btn-neutral float-left" title="Häufige selbständige Reboots" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Freetz Developers

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>