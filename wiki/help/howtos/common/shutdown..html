<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      help/howtos/common/shutdown – Freetz
    </title>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="/search" />
        <link rel="help" href="../../../TracGuide.html" />
        <link rel="alternate" href="shutdown%3Fformat=txt" type="text/x-trac-wiki" title="Reiner Text" />
        <link rel="up" href="../common.html" title="Übergeordnete Wiki-Seite anzeigen" />
        <link rel="start" href="/wiki" />
        <link rel="stylesheet" href="../../../../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../../../../chrome/common/css/wiki.css" type="text/css" /><link rel="stylesheet" href="../../../../chrome/wikiextras/css/phrases.css" type="text/css" /><link rel="stylesheet" href="../../../../chrome/wikiextras/css/boxes.css" type="text/css" /><link rel="stylesheet" href="../../../../chrome/wikiextras/css/boxes-300.css" type="text/css" /><link rel="stylesheet" href="../../../../chrome/wikiextras/css/boxes-narrow-toc.css" type="text/css" /><link rel="stylesheet" href="../../../../wikicss.css" type="text/css" /><link rel="stylesheet" href="../../../../chrome/tags/css/tractags.css" type="text/css" /><link rel="stylesheet" href="../../../../chrome/wikinegotiator/css/langmenu-ctxnav.css" type="text/css" />
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="/favicon.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="/search/opensearch" title="Freetz durchsuchen" />
      <script type="text/javascript" charset="utf-8" src="../../../../chrome/common/js/jquery.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../../../chrome/common/js/babel.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../../../chrome/common/js/messages/de.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../../../chrome/common/js/trac.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../../../chrome/common/js/search.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../../../chrome/common/js/folding.js"></script>
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("#content").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $("#content").find(".wikianchor").each(function() {
          $(this).addAnchor(babel.format(_("Link to #%(id)s"), {id: $(this).attr('id')}));
        });
        $(".foldable").enableFolding(true, true);
      });
    </script>
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="/wiki"><img src="../../../../chrome/common/freetz_motd.png" alt="Freetz" /></a>
      </div>
      <form id="search" action="/search" method="get">
        <div>
          <label for="proj-search">Suche:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Suche" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="/login">Anmelden</a></li><li><a href="/prefs">Einstellungen</a></li><li><a href="../../../TracGuide.html">Hilfe/Anleitung</a></li><li><a href="/about">Über Trac</a></li><li><a href="/notification" title="Wiki Pages Change Notifications">My Notifications</a></li><li><a href="/register">Registrieren</a></li><li class="last"><a href="../../../Impressum.html">Impressum</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first active"><a href="/wiki">Wiki</a></li><li><a href="/timeline">Journal</a></li><li><a href="/roadmap">Projektplan</a></li><li><a href="/browser">Quellen durchsehen</a></li><li><a href="/report">Tickets anzeigen</a></li><li><a href="/search">Suche</a></li><li><a href="/tags">Tags</a></li><li><a href="/downloads">Downloads</a></li><li class="last"><a href="/screenshots">Bildschirmfotos</a></li>
    </ul>
  </div>
    <div id="langmenu"><ul><li class="first"><span title="Select a language of wiki content">Language:</span></li><li class=" active"><a class="" href="shutdown..html" title="displaying language (default)">German</a></li><li class=" last"><a class=" notexist" href="/wiki/help/howtos/common/shutdown.en" title="(not available)">English</a></li></ul></div><div id="main">
      <div id="pagepath" class="noprint">
  <a class="pathentry first" title="Zeige WikiStart an" href="/wiki">Wiki:</a><a class="pathentry" href="../../../help.html" title="Zeige help an">help</a><span class="pathentry sep">/</span><a class="pathentry" href="../../howtos.html" title="Zeige help/howtos an">howtos</a><span class="pathentry sep">/</span><a class="pathentry" href="../common.html" title="Zeige help/howtos/common an">common</a><span class="pathentry sep">/</span><a class="pathentry" href="shutdown.html" title="Zeige help/howtos/common/shutdown an">shutdown</a>
</div>
      <div id="ctxtnav" class="nav">
        <h2>Kontext-Navigation</h2>
        <ul>
          <li class="first"><a href="../common.html">Aufwärts</a></li><li><a href="../../../WikiStart.html">Startseite</a></li><li><a href="../../../TitleIndex.html">Inhaltsverzeichnis</a></li><li><a href="shutdown%3Faction=history.html">Änderungshistorie</a></li><li class="last"><a href="/notification/help/howtos/common/shutdown." title="Watch Page">Watch Page</a></li>
        </ul>
        <hr />
      </div>
    <div id="content" class="wiki">
      <div class="wikipage searchable">
        
          <div id="wikipage" class="trac-content"><p>
</p><div class="wiki-toc"><h4>Inhaltsverzeichnis</h4><ol><li><a href="shutdown.html#Voraussetzungen">Voraussetzungen</a></li><li><a href="shutdown.html#KonfigurationderFritzbox">Konfiguration der Fritzbox</a><ol><li><a href="shutdown.html#Keyserzeugen">Keys erzeugen</a></li><li><a href="shutdown.html#KonfigurationderFritzboxfürherunterzufahrendenLinux-Rechner">Konfiguration der Fritzbox für herunterzufahrenden Linux-Rechner</a></li><li><a href="shutdown.html#KonfigurationderFritzboxfürherunterzufahrendenWindows-Rechner">Konfiguration der Fritzbox für herunterzufahrenden Windows-Rechner</a></li></ol></li><li><a href="shutdown.html#KonfigurationdesherunterzufahrendenLinux-Rechners">Konfiguration des herunterzufahrenden Linux-Rechners</a></li><li><a href="shutdown.html#KonfigurationdesherunterzufahrendenWindows-RechnersgetestetunterWindowsXP">Konfiguration des herunterzufahrenden Windows-Rechners (getestet unter &hellip;</a></li><li><a href="shutdown.html#Bemerkungen">Bemerkungen</a></li></ol></div><p>
</p>
<h1 id="RechnerimNetzherunterfahren">Rechner im Netz herunterfahren</h1>
<p>
Mit den Freetz-Paketen wol und callmonitor existieren einfach zu konfigurierende Möglichkeiten, einen Rechner im Netz mittels Mobiltelefon oder Freetz-Webinterface zu starten. Ebenso einfach bedienbar ist das Herunterfahren eines Rechners hinter einer Fritzbox. Die Konfiguration ist keine Hexerei, es funktioniert sowohl für Linux- als auch Windows-Rechner.
</p>
<h2 id="Voraussetzungen">Voraussetzungen</h2>
<ul><li>Fritzbox mit den Paketen "dropbear" (inklusive ssh-client) und "callmonitor"
</li></ul><h2 id="KonfigurationderFritzbox">Konfiguration der Fritzbox</h2>
<h3 id="Keyserzeugen">Keys erzeugen</h3>
<ul><li>Auf Fritzbox einloggen, Ordner erstellen und Public Keys erzeugen:
<div class="code"><pre>mkdir /var/tmp/flash/ssh
<span class="nb">cd</span> /var/tmp/flash/ssh
dropbearkey -t rsa -f rsakey_box
</pre></div></li></ul><ul><li>Public Key extrahieren:
<div class="code"><pre>dropbearkey -y -f rsakey_box | grep ssh &gt; rsakey_box.pub
</pre></div></li></ul><h3 id="KonfigurationderFritzboxfürherunterzufahrendenLinux-Rechner">Konfiguration der Fritzbox für herunterzufahrenden Linux-Rechner</h3>
<ul><li>Auf Fritzbox Datei (etwa /var/tmp/flash/ssh/shutdown_linuxrechner.sh) mit folgendem Inhalt erzeugen (Manche Distributionen verhindern in der Standardeinstellung, dass der Benutzer "root" sich einloggen kann. Ändere dies oder, ersetze "root" am besten durch einen Benutzer, der aus Sicherheitsgründen nur die Rechte zum Herunterfahren des Rechners hat):
</li></ul><div class="code"><pre>ssh -i /var/tmp/flash/ssh/rsakey_box root@&lt;ip_rechner&gt; <span class="s2">"shutdown -h now"</span>
</pre></div><ul><li>Füge als abschließende Konfigurationsmaßnahme auf der Fritzbox folgende Zeile zu den Listenern des Callmonitors hinzu:
</li></ul><pre class="wiki">in:request ^&lt;abgangsrufnummer&gt; ^&lt;eingangsrufnummer&gt; HOME=/mod/root &amp;&amp; /var/tmp/flash/ssh/shutdown_linuxrechner.sh
</pre><h3 id="KonfigurationderFritzboxfürherunterzufahrendenWindows-Rechner">Konfiguration der Fritzbox für herunterzufahrenden Windows-Rechner</h3>
<ul><li>Auf Fritzbox Datei (etwa /var/tmp/flash/ssh/shutdown_windowsrechner.sh) mit folgendem Inhalt erzeugen, &lt;benutzername&gt; durch den Windows-Benutzernamen ersetzen:
<div class="code"><pre>ssh -i /var/tmp/flash/ssh/rsakey_box &lt;benutzername&gt;@&lt;ip_rechner&gt; <span class="s2">"shutdown -s"</span>
</pre></div></li></ul><ul><li>Folgende Zeile zu den Listenern des Callmonitors hinzufügen:
<pre class="wiki">in:request ^&lt;abgangsrufnummer&gt; ^&lt;eingangsrufnummer&gt; HOME=/mod/root &amp;&amp; /var/tmp/flash/ssh/shutdown_windowsrechner.sh
</pre></li></ul><h2 id="KonfigurationdesherunterzufahrendenLinux-Rechners">Konfiguration des herunterzufahrenden Linux-Rechners</h2>
<ul><li>Public-Key (ja genau, jenen den wir vorhin extrahiert haben) von Fritzbox auf Zielrechner kopieren und authorisieren (evt. root durch /home/&lt;benutzername&gt; ersetzen, dann auch dafür sorgen, dass dieser Benutzer die Rechte hat, den Rechner runterzufahren):
<div class="code"><pre>cat rsakey_box.pub &gt;&gt; /root/.ssh/authorized_keys
</pre></div></li></ul><ul><li>OpenSSH-Server installieren und starten.
</li></ul><h2 id="KonfigurationdesherunterzufahrendenWindows-RechnersgetestetunterWindowsXP">Konfiguration des herunterzufahrenden Windows-Rechners (getestet unter Windows XP)</h2>
<ul><li>Public-Key von Fritzbox auf Zielrechner kopieren, in "authorized_keys" umbenennen und im Ordner c:\Dokumente und Einstellungen\benutzername\.ssh\ ablegen. Auf dem Rechner des Autors musste der Ordner (des vorangestellten Punktes wegen) im Terminal angelegt werden (mkdir .ssh).
</li></ul><ul><li><a class="ext-link" href="http://sshwindows.sourceforge.net/"><span class="icon">​</span>Openssh</a> installieren.
</li></ul><ul><li>Konfigurationsdatei c:\programme\openssh\etc\sshd_config anpassen. Folgende Werte korrigieren:
<pre class="wiki">StrictModes no
RSAAuthentication yes
PubkeyAuthentication yes
AuthorizedKeysFile	.ssh/authorized_keys
</pre></li></ul><p>
Nun kann der Rechner mittels Anrufen der im Listener des Callmonitors eingegebenen Rufnummer gestartet werden. Es funktioniert auch über das Freetz-Webinterface, Extras, Testanruf.
</p>
<h2 id="Bemerkungen">Bemerkungen</h2>
<ul><li>Der herunterzufahrende Rechner muss in /mod/root/.ssh/known_hosts eingetragen sein. Am einfachsten erreichst du das dadurch, dass du dich einmal von der Fritzbox aus mit dem Rechner über ssh verbindest.
</li></ul><ul><li>Damit die erstellten Dateien nicht durch einen Neustart der Fritzbox verlorengehen, muss noch der Befehl "modsave flash" ausgeführt werden.
</li></ul></div>
          
          <div class="trac-modifiedby">
            <span><a href="shutdown%3Faction=diff&amp;version=16.html" title="Version 16 von franzb">zuletzt geändert</a> <a class="timeline" href="/timeline?from=2009-08-27T13%3A32%3A25Z&amp;precision=second" title="Siehe Journal am 27.08.2009 13:32:25">vor 9 Jahren</a></span>
            <span class="trac-print">Zuletzt geändert am 27.08.2009 13:32:25</span>
          </div>
        
        
      </div>
      

    </div>
    <script type="text/javascript">
        jQuery.loadStyleSheet("/pygments/trac.css", "text/css");
    </script>
    <div id="altlinks">
      <h3>In anderen Formaten herunterladen:</h3>
      <ul>
        <li class="last first">
          <a rel="nofollow" href="shutdown%3Fformat=txt">Reiner Text</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../../../../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Betrieben mit <a href="/about"><strong>Trac 1.0.1</strong></a><br />
        von <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right"><div class="field" align="right"><form action="https://www.paypal.com/cgi-bin/webscr" method="post"><input type="hidden" name="cmd" value="_donations"/><input type="hidden" name="business" value="spenden@freetz.org"/><input type="hidden" name="item_name" value="Freetz Entwickler-Team"/><input type="hidden" name="no_shipping" value="1"/><input type="hidden" name="return" value="http://freetz.org"/><input type="hidden" name="cn" value="Name oder IPPF-Pseudonym"/><input type="hidden" name="currency_code" value="EUR"/><input type="hidden" name="tax" value="0"/><input type="hidden" name="lc" value="DE"/><input type="hidden" name="bn" value="PP-DonationsBF"/><input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="Zahlen Sie mit PayPal - schnell, kostenlos und sicher!"/><img alt="" border="0" src="/pixel.gif" width="1" height="1"/></form></div></p>
    </div>
  </body>
</html>